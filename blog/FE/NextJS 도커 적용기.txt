3:I[9275,[],""]
5:I[1343,[],""]
6:I[8700,["231","static/chunks/231-c1dde1c428767cbe.js","847","static/chunks/847-5a9cc6e9cff3122a.js","185","static/chunks/app/layout-acba8078adb4b26c.js"],"ThemeProviders"]
7:I[4080,["231","static/chunks/231-c1dde1c428767cbe.js","847","static/chunks/847-5a9cc6e9cff3122a.js","185","static/chunks/app/layout-acba8078adb4b26c.js"],""]
8:I[9032,["231","static/chunks/231-c1dde1c428767cbe.js","847","static/chunks/847-5a9cc6e9cff3122a.js","185","static/chunks/app/layout-acba8078adb4b26c.js"],"KBarSearchProvider"]
9:I[231,["231","static/chunks/231-c1dde1c428767cbe.js","173","static/chunks/173-db634e5878be84f7.js","797","static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js"],""]
c:I[509,["231","static/chunks/231-c1dde1c428767cbe.js","847","static/chunks/847-5a9cc6e9cff3122a.js","185","static/chunks/app/layout-acba8078adb4b26c.js"],"KBarButton"]
d:I[1398,["231","static/chunks/231-c1dde1c428767cbe.js","847","static/chunks/847-5a9cc6e9cff3122a.js","185","static/chunks/app/layout-acba8078adb4b26c.js"],"default"]
e:I[8976,["231","static/chunks/231-c1dde1c428767cbe.js","847","static/chunks/847-5a9cc6e9cff3122a.js","185","static/chunks/app/layout-acba8078adb4b26c.js"],"default"]
4:["slug","FE/NextJS%20%EB%8F%84%EC%BB%A4%20%EC%A0%81%EC%9A%A9%EA%B8%B0","c"]
a:T59b,m223.072 45.428 1.87.838a38.16 38.16 0 0 1 19.215 19.216l.838 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.87a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.838 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.266-5.056 9.444 0 11.71M128.36 188.002l1.87.838a38.16 38.16 0 0 1 19.215 19.215l.839 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.871a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.839 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.268-5.056 9.446 0 11.712M444.651 45.428l1.87.838a38.16 38.16 0 0 1 19.215 19.216l.838 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.87a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.838 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.266-5.056 9.444 0 11.71M431.541 288.532l1.87.838a38.16 38.16 0 0 1 19.215 19.216l.839 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.87a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.839 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.265-5.056 9.444 0 11.71b:Tb1a,M219.926 51.875h.002l1.872.839a30.7 30.7 0 0 1 15.469 15.47l.84 1.874c2.278 5.083 7.153 8.241 12.723 8.241h.001c5.57 0 10.446-3.158 12.724-8.24l.841-1.874a30.7 30.7 0 0 1 15.467-15.47l1.876-.841c5.083-2.278 8.24-7.154 8.24-12.724s-3.157-10.446-8.241-12.725l-1.874-.84a30.68 30.68 0 0 1-15.469-15.469l-.84-1.874c-2.278-5.083-7.154-8.241-12.725-8.241s-10.446 3.158-12.723 8.241l-.84 1.874A30.7 30.7 0 0 1 221.8 25.585l-1.874.84c-5.083 2.278-8.241 7.154-8.241 12.725s3.157 10.447 8.241 12.725m30.907-35.279a45.7 45.7 0 0 0 22.553 22.554 45.7 45.7 0 0 0-22.553 22.554 45.7 45.7 0 0 0-22.554-22.554 45.7 45.7 0 0 0 22.554-22.554M125.025 194.732l1.874.84a30.7 30.7 0 0 1 15.47 15.471l.839 1.872c2.277 5.084 7.153 8.243 12.723 8.243h.001c5.57 0 10.446-3.158 12.724-8.241l.84-1.874a30.68 30.68 0 0 1 15.469-15.47l1.875-.84c5.083-2.278 8.24-7.154 8.24-12.725s-3.158-10.446-8.241-12.725l-1.874-.84a30.68 30.68 0 0 1-15.469-15.47l-.84-1.874c-2.279-5.083-7.154-8.242-12.726-8.241-5.57 0-10.445 3.158-12.723 8.24l-.841 1.876a30.7 30.7 0 0 1-15.469 15.47l-1.873.839c-5.083 2.279-8.241 7.154-8.241 12.725.001 5.57 3.159 10.446 8.242 12.724m30.908-35.278a45.7 45.7 0 0 0 22.554 22.554 45.7 45.7 0 0 0-22.554 22.555 45.7 45.7 0 0 0-22.554-22.554 45.7 45.7 0 0 0 22.554-22.555M503.761 26.426l-1.874-.84a30.69 30.69 0 0 1-15.469-15.469l-.84-1.874C483.3 3.16 478.425.001 472.854.001h-.001c-5.57 0-10.446 3.158-12.725 8.241l-.84 1.874a30.7 30.7 0 0 1-15.469 15.47l-1.873.84c-5.083 2.278-8.241 7.154-8.241 12.725s3.158 10.447 8.241 12.725h.001l1.872.839a30.68 30.68 0 0 1 15.469 15.47l.84 1.874c2.279 5.083 7.154 8.241 12.725 8.241s10.445-3.158 12.723-8.24l.84-1.874a30.69 30.69 0 0 1 15.468-15.47l1.875-.84c5.083-2.278 8.241-7.154 8.241-12.725.001-5.572-3.157-10.447-8.239-12.725m-30.908 35.278a45.7 45.7 0 0 0-22.554-22.554 45.7 45.7 0 0 0 22.554-22.554 45.7 45.7 0 0 0 22.554 22.554 45.7 45.7 0 0 0-22.554 22.554M490.624 270.012l-1.874-.84a30.69 30.69 0 0 1-15.469-15.469l-.84-1.874c-2.278-5.083-7.154-8.242-12.725-8.241-5.57 0-10.446 3.158-12.723 8.239l-.842 1.876a30.68 30.68 0 0 1-15.468 15.469l-1.874.84c-5.083 2.279-8.241 7.154-8.241 12.725s3.158 10.447 8.241 12.725h.001l1.872.839a30.7 30.7 0 0 1 15.47 15.472l.84 1.872c2.278 5.083 7.153 8.242 12.724 8.242h.001c5.57 0 10.446-3.158 12.724-8.241l.84-1.874a30.68 30.68 0 0 1 15.467-15.469l1.876-.84c5.083-2.278 8.24-7.154 8.24-12.725.001-5.572-3.157-10.448-8.24-12.726m-30.907 35.279a45.7 45.7 0 0 0-22.554-22.555 45.7 45.7 0 0 0 22.554-22.555 45.7 45.7 0 0 0 22.553 22.555 45.7 45.7 0 0 0-22.553 22.555M224.767 312.226 45.191 491.809c-6.893 6.893-18.107 6.892-25 0-6.892-6.892-6.892-18.106 0-24.998l45.002-45.004a7.515 7.515 0 1 0-10.628-10.628L9.564 456.183c-12.752 12.752-12.752 33.501 0 46.253C15.94 508.813 24.316 512 32.691 512s16.751-3.188 23.127-9.564l179.576-179.582a7.515 7.515 0 0 0-10.627-10.628f:T69f,M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z0:["MzTucfiaUceCf9mrzZE1p",[[["",{"children":["blog",{"children":[["slug","FE/NextJS%20%EB%8F%84%EC%BB%A4%20%EC%A0%81%EC%9A%A9%EA%B8%B0","c"],{"children":["__PAGE__?{\"slug\":[\"FE\",\"NextJS 도커 적용기\"]}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","FE/NextJS%20%EB%8F%84%EC%BB%A4%20%EC%A0%81%EC%9A%A9%EA%B8%B0","c"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/cbda1b9e65ea0822.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"ko-kr","className":"__variable_0aa4ae scroll-smooth","suppressHydrationWarning":true,"children":[["$","script",null,{"src":"https://giscus.app/client.js","data-repo":"devcdd/devcdd.github.io","data-repo-id":"R_kgDOMQ309g","data-category":"General","data-category-id":"DIC_kwDOMQ309s4Cgh__","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":"preferred_color_scheme","data-lang":"ko","crossOrigin":"anonymous","async":true}],["$","link",null,{"rel":"apple-touch-icon","sizes":"76x76","href":"/static/favicons/cdd-32x32.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/static/favicons/cdd-32x32.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/static/favicons/cdd-16x16.png"}],["$","link",null,{"rel":"manifest","href":"/static/favicons/site.webmanifest"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#000000"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#fff"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#000"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}],["$","body",null,{"className":"bg-white pl-[calc(100vw-100%)] text-black antialiased dark:bg-gray-950 dark:text-white","children":["$","$L6",null,{"children":[["$undefined","$undefined","$undefined",["$","$L7",null,{"async":true,"defer":true,"data-website-id":"$undefined","src":"https://analytics.umami.is/script.js"}],"$undefined","$undefined"],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":["$","div",null,{"className":"flex h-screen flex-col justify-between font-sans","children":[["$","$L8",null,{"kbarConfig":{"searchDocumentsPath":"search.json"},"children":[["$","header",null,{"className":"flex items-center justify-between py-10","children":[["$","div",null,{"children":["$","$L9",null,{"href":"/","aria-label":"9성급 프론트 개발자가 되기 위해 오늘도 달린다","children":["$","div",null,{"className":"flex items-center justify-between","children":[["$","div",null,{"className":"mr-3","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":40,"height":40,"viewBox":"0 0 512.001 512.001","children":[["$","path",null,{"fill":"#8c808a","d":"M15.364 496.636c-9.818-9.818-9.818-25.737 0-35.555L380.4 96.031c9.819-9.819 25.738-9.819 35.557 0 9.818 9.818 9.818 25.737 0 35.555L50.92 496.636c-9.818 9.819-25.738 9.819-35.556 0"}],["$","path",null,{"fill":"#7b7179","d":"M403.229 118.859 38.192 483.908c-7.575 7.576-18.78 9.3-28.014 5.186a25.1 25.1 0 0 0 5.186 7.542c9.819 9.819 25.738 9.819 35.557 0l365.036-365.05c9.818-9.818 9.818-25.737 0-35.555a25.1 25.1 0 0 0-7.542-5.186c4.113 9.234 2.389 20.439-5.186 28.014"}],["$","path",null,{"fill":"#e6e2e6","d":"M415.956 96.031c-9.818-9.819-25.737-9.819-35.555 0l-52.416 52.418 35.555 35.557 52.416-52.418c9.818-9.819 9.818-25.739 0-35.557"}],["$","path",null,{"fill":"#d8d1d7","d":"M408.414 90.845c4.114 9.234 2.389 20.439-5.186 28.014l-52.417 52.419 12.728 12.728 52.416-52.418c9.818-9.819 9.818-25.738 0-35.556a25 25 0 0 0-7.541-5.187"}],["$","g",null,{"fill":"#ffdc00","children":["$","path",null,{"d":"$a"}]}],["$","path",null,{"d":"$b"}],["$","path",null,{"d":"M421.581 90.407c-6.177-6.178-14.391-9.58-23.127-9.58s-16.95 3.402-23.128 9.58L362.834 102.9a7.516 7.516 0 0 0 10.628 10.627l12.491-12.493c3.339-3.339 7.778-5.178 12.5-5.178s9.161 1.839 12.5 5.178c6.892 6.892 6.892 18.106 0 24.998l-47.207 47.209-24.998-24.999 13.459-13.46a7.514 7.514 0 0 0 0-10.627 7.514 7.514 0 0 0-10.628 0l-18.771 18.772-.002.002-.002.002L75.821 389.923c-2.736 2.736-2.918 7.255-.399 10.196 2.81 3.282 7.97 3.488 11.027.431L328.12 158.87l24.999 25-107.097 107.101c-2.736 2.736-2.918 7.255-.399 10.196 2.81 3.282 7.97 3.488 11.027.431L421.581 136.66c12.752-12.751 12.752-33.501 0-46.253"}]]}]}],["$","div",null,{"className":"hidden h-6 text-2xl font-semibold sm:block","children":"9성급 프론트 개발자가 되기 위해 오늘도 달린다"}]]}]}]}],["$","div",null,{"className":"flex items-center space-x-4 leading-5 sm:space-x-6","children":[[["$","$L9",null,{"href":"/blog","className":"hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"Blog"}],["$","$L9",null,{"href":"/tags","className":"hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"Tags"}],["$","$L9",null,{"href":"/projects","className":"hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"Projects"}],["$","$L9",null,{"href":"/about","className":"hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"About"}]],["$","$Lc",null,{"aria-label":"Search","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","className":"h-6 w-6 text-gray-900 dark:text-gray-100","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}]}]}],["$","$Ld",null,{}],["$","$Le",null,{}]]}]]}],["$","main",null,{"className":"mb-auto","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"className":"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6","children":[["$","div",null,{"className":"space-x-2 pb-8 pt-6 md:space-y-5","children":["$","h1",null,{"className":"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14","children":"404"}]}],["$","div",null,{"className":"max-w-md","children":[["$","p",null,{"className":"mb-4 text-xl font-bold leading-normal md:text-2xl","children":"Sorry we couldn't find this page."}],["$","p",null,{"className":"mb-8","children":"But dont worry, you can find plenty of other things on our homepage."}],["$","$L9",null,{"href":"/","className":"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500","children":"Back to homepage"}]]}]]}],"notFoundStyles":[],"styles":null}]}]]}],["$","footer",null,{"children":["$","div",null,{"className":"mt-16 flex flex-col items-center","children":[["$","div",null,{"className":"mb-3 flex space-x-4","children":[["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/devcdd","children":[["$","span",null,{"className":"sr-only","children":"github"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6","children":[["$","title",null,{"children":"Github"}],["$","path",null,{"d":"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}]]}]]}],["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://youtube.com/@cdd_world","children":[["$","span",null,{"className":"sr-only","children":"youtube"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6","children":[["$","title",null,{"children":"Youtube"}],["$","path",null,{"d":"M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"}]]}]]}],["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://www.instagram.com/cdd_world","children":[["$","span",null,{"className":"sr-only","children":"instagram"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6","children":[["$","title",null,{"children":"Instagram"}],["$","path",null,{"d":"$f"}]]}]]}]]}],["$","div",null,{"className":"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400","children":[["$","div",null,{"children":"CDD"}],["$","div",null,{"children":" • "}],["$","div",null,{"children":"© 2024"}],["$","div",null,{"children":" • "}],["$","$L9",null,{"href":"/","children":"디디의 개발일지"}]]}],["$","div",null,{"className":"mb-8 text-sm text-gray-500 dark:text-gray-400","children":["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/devcdd","children":"CDD GITHUB"}]}]]}]}]]}]}]]}]}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/41e61cdfe06ece57.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/53e96307944877b8.css","precedence":"next","crossOrigin":"$undefined"}]],"$L10"]]]]
11:I[4347,["231","static/chunks/231-c1dde1c428767cbe.js","173","static/chunks/173-db634e5878be84f7.js","797","static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js"],"default"]
12:I[8173,["231","static/chunks/231-c1dde1c428767cbe.js","173","static/chunks/173-db634e5878be84f7.js","797","static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js"],"Image"]
13:I[408,["231","static/chunks/231-c1dde1c428767cbe.js","173","static/chunks/173-db634e5878be84f7.js","797","static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js"],"default"]
14:I[9629,["231","static/chunks/231-c1dde1c428767cbe.js","173","static/chunks/173-db634e5878be84f7.js","797","static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js"],"default"]
2:[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"Next.js Docker 적용기\",\"datePublished\":\"2024-10-25T00:00:00.000Z\",\"dateModified\":\"2024-10-25T00:00:00.000Z\",\"description\":\"Next.js로 개발한 프로젝트를 도커 이미지로 만들게 되었는데, 이와 관련해서 작성해봤습니다.\",\"url\":\"https://example.com/blog/FE/NextJS 도커 적용기\",\"author\":[{\"@type\":\"Person\",\"name\":\"CDD\"}]}"}}],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":[["$","$L11",null,{}],["$","article",null,{"children":["$","div",null,{"className":"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700","children":[["$","header",null,{"className":"pt-6 xl:pb-6","children":["$","div",null,{"className":"space-y-1 text-center","children":[["$","dl",null,{"className":"space-y-10","children":["$","div",null,{"children":[["$","dt",null,{"className":"sr-only","children":"Published on"}],["$","dd",null,{"className":"text-base font-medium leading-6 text-gray-500 dark:text-gray-400","children":["$","time",null,{"dateTime":"2024-10-25T00:00:00.000Z","children":"2024년 10월 25일 금요일"}]}]]}]}],["$","div",null,{"children":["$","h1",null,{"className":"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14","children":"Next.js Docker 적용기"}]}]]}]}],["$","div",null,{"className":"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0","children":[["$","dl",null,{"className":"pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700","children":[["$","dt",null,{"className":"sr-only","children":"Authors"}],["$","dd",null,{"children":["$","ul",null,{"className":"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8","children":[["$","li","CDD",{"className":"flex items-center space-x-2","children":[["$","$L12",null,{"src":"/static/images/avatar.png","width":38,"height":38,"alt":"avatar","className":"h-10 w-10 rounded-full"}],["$","dl",null,{"className":"whitespace-nowrap text-sm font-medium leading-5","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"className":"text-gray-900 dark:text-gray-100","children":"CDD"}],["$","dt",null,{"className":"sr-only","children":"Twitter"}],["$","dd",null,{"children":"$undefined"}]]}]]}]]}]}]]}],["$","div",null,{"className":"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0","children":[["$","div",null,{"className":"prose max-w-none pb-8 pt-10 dark:prose-invert","children":[["$","h2",null,{"className":"content-header","id":"서론","children":[["$","a",null,{"href":"#서론","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"서론"]}],["$","p",null,{"children":"지난 번 게시글에서는 환경변수 관련해서 글을 작성했었죠, 그것은 이번 글을 위한 빌드업 같은 느낌으로 이해해주시면 될 것 같습니다. 이번 글에서는 본격적으로 패키징을 해서 패키지화(제품화) 시키는 과정을 작성해보려고 합니다."}],["$","ul",null,{"className":"","children":[["$","li","0",{"className":"","children":[["$","a",null,{"href":"#debian-vs-docker","children":"Debian VS Docker"}],null]}],["$","li","1",{"className":"","children":[["$","a",null,{"href":"#debian","children":"Debian"}],null]}],["$","li","2",{"className":"","children":[["$","a",null,{"href":"#docker","children":"Docker"}],null]}],["$","li","3",{"className":"","children":[["$","a",null,{"href":"#docker-image","children":"Docker Image"}],["$","ul",null,{"className":"","children":[["$","li","0",{"className":"","children":[["$","a",null,{"href":"#생성-과정","children":"생성 과정"}],null]}],["$","li","1",{"className":"","children":[["$","a",null,{"href":"#docker-안에-nginx가-들어가는-이유는","children":"Docker 안에 Nginx가 들어가는 이유는?"}],null]}],["$","li","2",{"className":"","children":[["$","a",null,{"href":"#그러면-이전-게시글에서의-runtime-env는-어떻게-적용해","children":"그러면 이전 게시글에서의 runtime env는 어떻게 적용해?"}],null]}],["$","li","3",{"className":"","children":[["$","a",null,{"href":"#아쉽지만-","children":"아쉽지만 .."}],null]}],["$","li","4",{"className":"","children":[["$","a",null,{"href":"#docker-compose","children":"Docker Compose"}],null]}]]}]]}],["$","li","4",{"className":"","children":[["$","a",null,{"href":"#최종적인-설치-과정","children":"최종적인 설치 과정"}],null]}]]}],["$","h2",null,{"className":"content-header","id":"debian-vs-docker","children":[["$","a",null,{"href":"#debian-vs-docker","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Debian VS Docker"]}],["$","h2",null,{"className":"content-header","id":"debian","children":[["$","a",null,{"href":"#debian","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Debian"]}],["$","p",null,{"children":[["$","code",null,{"children":"Debian"}],"을 사용하여 사내 레포지토리에 올려놓는다면 ",["$","code",null,{"children":"sudo apt-get install [package_name]"}],"으로 패키지 설치가 가능합니다. 다만 이후에 ",["$","code",null,{"children":"conf"}],"를 할당해주거나 이외의 서버 환경에 맞는 커스텀은 설치하는 사람이 담당해야 한다는 단점이 존재하죠. 어차피 ",["$","code",null,{"children":"Ubuntu"}]," 기반 서버에 설치될 것이기 때문에 요구사항은 ",["$","code",null,{"children":"Debian"}]," 설치를 하는 방향으로 들어왔습니다. 그래서 아래와 같이 구조를 짜고, 설치 스크립트를 고민중이었습니다."]}],["$","$L13",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":"build/\n"}],["$","span",null,{"className":"code-line","children":"├── deb/\n"}],["$","span",null,{"className":"code-line","children":"│   ├── DEBIAN/\n"}],["$","span",null,{"className":"code-line","children":"│   │   ├── control\n"}],["$","span",null,{"className":"code-line","children":"│   │   └── postinst\n"}],["$","span",null,{"className":"code-line","children":"│   ├── Makefile\n"}],["$","span",null,{"className":"code-line","children":"│   ├── product.deb\n"}],["$","span",null,{"className":"code-line","children":"│   └── opt/\n"}],["$","span",null,{"className":"code-line","children":"│       └── company/\n"}],["$","span",null,{"className":"code-line","children":"│           ├── etc/\n"}],["$","span",null,{"className":"code-line","children":"│           │   └── product/\n"}],["$","span",null,{"className":"code-line","children":"│           │       ├── cert/\n"}],["$","span",null,{"className":"code-line","children":"│           │       └── conf/\n"}],["$","span",null,{"className":"code-line","children":"│           │           ├── product.nginx.conf\n"}],["$","span",null,{"className":"code-line","children":"│           │           └── setting.sh\n"}],["$","span",null,{"className":"code-line","children":"│           └── lib/\n"}],["$","span",null,{"className":"code-line","children":"│               └── product/\n"}],["$","span",null,{"className":"code-line","children":"│                   ├── .next/\n"}],["$","span",null,{"className":"code-line","children":"│                   ├── nextconfig.js\n"}],["$","span",null,{"className":"code-line","children":"│                   ├── package.json\n"}],["$","span",null,{"className":"code-line","children":"│                   ├── node_modules/\n"}],["$","span",null,{"className":"code-line","children":"│                   ├── ecosystem.config.js\n"}],["$","span",null,{"className":"code-line","children":"│                   ├── config.json\n"}],["$","span",null,{"className":"code-line","children":"│                   └── .env\n"}],["$","span",null,{"className":"code-line","children":"├── conf/\n"}],["$","span",null,{"className":"code-line","children":"│   └── product.nginx.conf\n"}],["$","span",null,{"className":"code-line","children":"└── target/\n"}],["$","span",null,{"className":"code-line","children":"    ├── .next/\n"}],["$","span",null,{"className":"code-line","children":"    ├── next.config.js\n"}],["$","span",null,{"className":"code-line","children":"    ├── package.json\n"}],["$","span",null,{"className":"code-line","children":"    ├── node_modules/\n"}],["$","span",null,{"className":"code-line","children":"    ├── config.json\n"}],["$","span",null,{"className":"code-line","children":"    ├── .env\n"}],["$","span",null,{"className":"code-line","children":"    └── setting.sh\n"}]]}]}],["$","p",null,{"children":["그러나 이렇게 설치를 하게 되면 서버가 돌기 위해 신경써야 할 요소들이 많습니다. ",["$","code",null,{"children":"Next"}]," 서버가 돌기 위해 ",["$","code",null,{"children":"next.config.js"}],", ",["$","code",null,{"children":"package.json"}],", ",["$","code",null,{"children":"node_modules"}]," 등등 경로 설정 같은 것들도 신경써야 하죠. 거기다 다른 프로젝트들까지 동시에 설치가 될 예정인데, 아무리 ",["$","code",null,{"children":"depth"}],"를 파서 설치를 한다고 하더라도 비개발자에게 설치를 시키기에는 구조가 복잡했습니다."]}],["$","h2",null,{"className":"content-header","id":"docker","children":[["$","a",null,{"href":"#docker","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Docker"]}],["$","section",null,{"className":"flex items-center justify-center my-[-10px]","children":["$","img",null,{"src":"/static/images/posts/docker.png","alt":"Docker Image","className":"w-1/2"}]}],["$","p",null,{"children":["반면 ",["$","code",null,{"children":"Docker"}],"를 쓴다면 이야기가 다릅니다. 저러한 구성 그대로 이미지의 형태를 만들게 된다면 서버의 레포지토리가 아닌 하나의 도커 컨테이너로써 구동 되기 때문에 독립된 ",["$","code",null,{"children":"OS"}],"를 사용하는 형식이 됩니다. ",["$","code",null,{"children":"Debian"}],"과는 다르게 ",["$","code",null,{"children":"/opt/company"}],"에 들어가봐도 아무것도 존재하지 않게 된다는 말이죠. 이외에도 여러가지 이점이 있기도 하고, 이참에 한 번 공부해봐야겠다 싶어서 ",["$","code",null,{"children":"도커 씁시다"}],"라고 제안했고, 수용되었습니다."]}],["$","h2",null,{"className":"content-header","id":"docker-image","children":[["$","a",null,{"href":"#docker-image","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Docker Image"]}],["$","h3",null,{"className":"content-header","id":"생성-과정","children":[["$","a",null,{"href":"#생성-과정","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"생성 과정"]}],["$","p",null,{"children":["우선 도커를 사용하기로 결정했다면 어떻게 이미지로 만들지부터 생각을 해야합니다. 이미지를 빌드하기 위해서는 일반적으로 ",["$","code",null,{"children":"docker build"}]," 명령어를 사용하는데, 그냥 무작정 빌드하면 되는 건 아니고 빌드를 위한 스크립트를 짜줘야 합니다. 여기에 활용되는 파일이 바로 ",["$","code",null,{"children":"DockerFile"}],"인데요, 예제가 ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/vercel/next.js/tree/canary/examples/with-docker","children":[["$","code",null,{"children":"Next"}]," 공식예제"]}],"에 자세히 나와있더군요. 이를 참고하여 아래와 같이 작성을 해봤습니다, 단계마다 주석을 달아놓았으니 이해하시기 편할겁니다."]}],["$","div",null,{"className":"remark-code-title","children":"Dockerfile"}],["$","$L13",null,{"className":"language-dockerfile","children":["$","code",null,{"className":"code-highlight language-dockerfile","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# node:18-alpine을 베이스로 사용합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"FROM"}]," node:18-alpine ",["$","span",null,{"className":"token keyword","children":"AS"}]," base"]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 베이스는 node:18-alpine을 그대로 사용하고, deps라는 이름으로 복사합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"FROM"}]," base ",["$","span",null,{"className":"token keyword","children":"AS"}]," deps"]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# libc6-compat을 설치합니다, 이건 공식 예제에도 있던데 노드 관련 패키지라고 하는 것 같더군요."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"RUN"}]," apk add --no-cache libc6-compat"]}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# /app 경로로 이동합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"WORKDIR"}]," /app"]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# package.json, yarn.lock, package-lock.json을 복사합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"COPY"}]," package.json yarn.lock* package-lock.json* ./"]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 이건 예제 명령어 그대로 작성한건데, 패키지 매니저에 따라 다르게 Install을 하는 것 같습니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 저희는 yarn을 사용하고 있기에 첫 번째 조건문이 실행되겠죠?"}],"\n"]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"RUN"}]," ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":["  if [ -f yarn.lock ]; then yarn --frozen-lockfile; ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":["  elif [ -f package-lock.json ]; then npm ci; ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":["  elif [ -f pnpm-lock.yaml ]; then corepack enable pnpm && pnpm i --frozen-lockfile; ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":["  else echo ",["$","span",null,{"className":"token string","children":"\"Lockfile not found.\""}]," && exit 1; ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":"  fi"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 베이스는 node:18-alpine을 그대로 사용하고, builder라는 이름으로 복사합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"FROM"}]," base ",["$","span",null,{"className":"token keyword","children":"AS"}]," builder"]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# /app 경로로 이동합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"WORKDIR"}]," /app"]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 아까 deps에서 설치한 node_modules를 복사하여 사용합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"COPY"}]," ",["$","span",null,{"className":"token options","children":[["$","span",null,{"className":"token property","children":"--from"}],["$","span",null,{"className":"token punctuation","children":"="}],["$","span",null,{"className":"token string","children":"deps"}]]}]," /app/node_modules ./node_modules"]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# .dockerignore에 node_modules를 추가해놓았기 때문에 이중 복사가 되지 않습니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"COPY"}]," . ."]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# yarn build를 실행합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"RUN"}]," ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":["  if [ -f yarn.lock ]; then yarn run build; ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":["  elif [ -f package-lock.json ]; then npm run build; ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":["  elif [ -f pnpm-lock.yaml ]; then corepack enable pnpm && pnpm run build; ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":["  else echo ",["$","span",null,{"className":"token string","children":"\"Lockfile not found.\""}]," && exit 1; ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":"  fi"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 베이스는 node:18-alpine을 그대로 사용하고, runner라는 이름으로 복사합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"FROM"}]," base ",["$","span",null,{"className":"token keyword","children":"AS"}]," runner"]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# nginx를 설치합니다, 왜 설치하는지는 아래에서 추가적으로 설명하도록 하겠습니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"RUN"}]," apk add --no-cache nginx"]}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 로그 디렉토리를 따로 빼서 편하게 보기 위해 디렉토리를 생성합니다, 이후에는 볼륨 마운트를 걸어서 호스트에서도 확인할 수 있게 할 예정입니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"RUN"}]," mkdir -p /app/logs && ",["$","span",null,{"className":"token operator","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":"    chmod -R 755 /app/logs"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# /app 경로로 이동합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"WORKDIR"}]," /app"]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 아래에 복사되는 파일들이 최종적으로 이미지에 들어가게 될 구성이라고 생각하시면 될 것 같습니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"COPY"}]," ",["$","span",null,{"className":"token options","children":[["$","span",null,{"className":"token property","children":"--from"}],["$","span",null,{"className":"token punctuation","children":"="}],["$","span",null,{"className":"token string","children":"builder"}]]}]," /app/public ./public"]}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"COPY"}]," ",["$","span",null,{"className":"token options","children":[["$","span",null,{"className":"token property","children":"--from"}],["$","span",null,{"className":"token punctuation","children":"="}],["$","span",null,{"className":"token string","children":"builder"}]]}]," /app/.next/standalone ./"]}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"COPY"}]," ",["$","span",null,{"className":"token options","children":[["$","span",null,{"className":"token property","children":"--from"}],["$","span",null,{"className":"token punctuation","children":"="}],["$","span",null,{"className":"token string","children":"builder"}]]}]," /app/.next/static ./.next/static"]}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"COPY"}]," ",["$","span",null,{"className":"token options","children":[["$","span",null,{"className":"token property","children":"--from"}],["$","span",null,{"className":"token punctuation","children":"="}],["$","span",null,{"className":"token string","children":"builder"}]]}]," /app/product.nginx.conf /etc/nginx/http.d/default.conf"]}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# nginx 기본 include 설정이 /etc/nginx/http.d로 되어 있어서 그냥 해당 경로에 맞게 복사해줬습니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 80번 포트를 열어줍니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"EXPOSE"}]," 80"]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# next와 nginx를 실행합니다."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token instruction","children":[["$","span",null,{"className":"token keyword","children":"CMD"}]," [",["$","span",null,{"className":"token string","children":"\"sh\""}],", ",["$","span",null,{"className":"token string","children":"\"-c\""}],", ",["$","span",null,{"className":"token string","children":"\"node server.js & nginx -g 'daemon off;'\""}],"]"]}],"\n"]}]]}]}],["$","p",null,{"children":["이렇게 ",["$","code",null,{"children":"DockerFile"}],"을 구성하고, ",["$","code",null,{"children":"docker build -t [image_name] ."}]," 명령어를 통해 이미지를 빌드하면 ",["$","code",null,{"children":"image_name"}],"이라는 이름으로 이미지가 생성됩니다. 이는 ",["$","code",null,{"children":"docker images"}]," 명령어를 통해 확인 하실 수 있습니다."]}],["$","h3",null,{"className":"content-header","id":"docker-안에-nginx가-들어가는-이유는","children":[["$","a",null,{"href":"#docker-안에-nginx가-들어가는-이유는","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Docker 안에 Nginx가 들어가는 이유는?"]}],["$","p",null,{"children":["아까 작성한 ",["$","code",null,{"children":"DockerFile"}]," 부분을 읽어보시면 ",["$","code",null,{"children":"nginx"}],"를 설치하고 ",["$","code",null,{"children":"conf"}]," 파일을 옮기는 단계가 포함되어 있습니다. ",["$","code",null,{"children":"conf"}]," 파일은 아래와 같이 구성되어 있습니다."]}],["$","div",null,{"className":"remark-code-title","children":"product.nginx.conf"}],["$","$L13",null,{"className":"language-editorconfig","children":["$","code",null,{"className":"code-highlight language-editorconfig","children":[["$","span",null,{"className":"code-line","children":"server {\n"}],["$","span",null,{"className":"code-line","children":["    listen 80",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    server_name localhost",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    error_log /app/logs/error.log",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    access_log /app/logs/access.log",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":"    location /static/ {\n"}],["$","span",null,{"className":"code-line","children":["        root /app/public",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        access_log off",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        log_not_found off",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        expires max",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    }\n"}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":"    location /_next/static {\n"}],["$","span",null,{"className":"code-line","children":["        alias /app/.next/static/",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        access_log off",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        log_not_found off",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        expires max",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    }\n"}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":"    location / {\n"}],["$","span",null,{"className":"code-line","children":["        proxy_pass http://localhost:3000",["$","span",null,{"className":"token comment","children":"; # Next.js 서버로 프록시"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        proxy_set_header Host $host",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        proxy_set_header X-Real-IP $remote_addr",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        proxy_set_header X-Forwarded-Proto $scheme",["$","span",null,{"className":"token comment","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    }\n"}],["$","span",null,{"className":"code-line","children":"}\n"}]]}]}],["$","p",null,{"children":["구조 상 도커 컨테이너는 호스트와 별개로 존재하는 ",["$","code",null,{"children":"OS"}],"와 같은 느낌이라서 도커 컨테이너 내부의 파일에 접근하기 위해서는 ",["$","code",null,{"children":"docker exec"}],"와 같은 별도의 방법을 사용해야 합니다. 하지만 저렇게 ",["$","code",null,{"children":"nginx"}],"를 컨테이너 내부에서 돌려주면 내부 정적 파일 자체를 nginx가 80 포트로 내보내고, 그렇게 빠져나온 80 포트를 호스트와 매핑만 시켜주게 된다면 별도의 설정 없이 정적 파일을 제공할 수 있게 되는 것이죠."]}],["$","section",null,{"className":"flex items-center justify-center my-[-30px]","children":["$","img",null,{"src":"/static/images/posts/docker-proxy.png","alt":"Docker Image","className":"w-full"}]}],["$","p",null,{"children":["그래서 이를 실행하기 위해서는 ",["$","code",null,{"children":"docker run -p 3000:80 image"}]," 명령어를 입력하면 됩니다. 3000:80의 의미는 도커 컨테이너의 80 포트를 호스트의 3000으로 할당한다는 뜻입니다. 호스트 포트:컨테이너 포트 순서로 입력한다고 생각하면 될 것 같아요."]}],["$","h3",null,{"className":"content-header","id":"그러면-이전-게시글에서의-runtime-env는-어떻게-적용해","children":[["$","a",null,{"href":"#그러면-이전-게시글에서의-runtime-env는-어떻게-적용해","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"그러면 이전 게시글에서의 runtime env는 어떻게 적용해?"]}],["$","p",null,{"children":[["$","code",null,{"children":"--env-file"}]," 옵션을 사용하여 ",["$","code",null,{"children":"docker run"}],"을 해주면 해당 ",["$","code",null,{"children":"env"}],"를 보게 됩니다. ",["$","code",null,{"children":"docker run --env-file ./.env -p 3000:80 image"}],"을 입력하면 되겠죠? 그러면 호스트의 ",["$","code",null,{"children":"env"}],"가 바뀌었을 때는 해당 컨테이너만 ",["$","code",null,{"children":"restart"}]," 해주면 되겠죠?"]}],["$","h3",null,{"className":"content-header","id":"아쉽지만-","children":[["$","a",null,{"href":"#아쉽지만-","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"아쉽지만 .."]}],["$","p",null,{"children":["틀렸습니다. ",["$","code",null,{"children":"docker restart container"}],"와 같은 명령어를 통해 컨테이너를 재실행하게 되면 단순히 컨테이너만 재실행 되는 것이며, 내부 어플리케이션이 재실행을 하지는 않습니다. 그래서 ",["$","code",null,{"children":".env"}],"를 새롭게 적용할수가 없고, 차안이라면 컨테이너 자체를 완전히 내렸다가 올리는 방법입니다. 하지만, 그런 방식은 좀 귀찮으니 새로운 방식을 알려드리겠습니다."]}],["$","h3",null,{"className":"content-header","id":"docker-compose","children":[["$","a",null,{"href":"#docker-compose","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Docker Compose"]}],["$","p",null,{"children":["원래 멀티 컨테이너를 위해 사용한다고는 하는데, 아직 거기까지는 공부를 못했고 보다 간단히 새로운 ",["$","code",null,{"children":".env"}],"를 적용시킬 수 있을 것 같아 도입했습니다. 우선 호스트 쪽에 아래와 같은 ",["$","code",null,{"children":".yml"}]," 파일을 만들어줍니다."]}],["$","div",null,{"className":"remark-code-title","children":"docker-compose.yml"}],["$","$L13",null,{"className":"language-yaml","children":["$","code",null,{"className":"code-highlight language-yaml","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"services"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"app"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"image"}],["$","span",null,{"className":"token punctuation","children":":"}]," image\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"ports"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token string","children":"\"3000:80\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"env_file"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"-"}]," ./.env ",["$","span",null,{"className":"token comment","children":"# yml 파일과 같은 경로에 있어야겠죠?"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"container_name"}],["$","span",null,{"className":"token punctuation","children":":"}]," container\n"]}]]}]}],["$","p",null,{"children":["이후 ",["$","code",null,{"children":"docker-compose up -d"}]," 명령어만 실행해주면 컨테이너가 새롭게 만들어지며 프로젝트가 재실행 됩니다. 즉, 새로운 ",["$","code",null,{"children":".env"}],"를 적용시킬 수 있다는 말이죠."]}],["$","h2",null,{"className":"content-header","id":"최종적인-설치-과정","children":[["$","a",null,{"href":"#최종적인-설치-과정","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"최종적인 설치 과정"]}],["$","p",null,{"children":["하지만 비개발자의 설치를 고려한다면 이미지를 ",["$","code",null,{"children":"pull"}]," 받고, ",["$","code",null,{"children":"docker-compose"}],"를 실행시키는 이 과정까지 자동화가 되어야 합니다. 여기까지의 과정을 저희는 ",["$","code",null,{"children":"debian"}],"을 활용할 것 같습니다. 아래가 구성한 최종 워크플로우입니다."]}],["$","$L13",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 도커는 설치 완료했다고 가정"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Debian"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"1"}],". ",["$","span",null,{"className":"token function","children":"sudo"}]," ",["$","span",null,{"className":"token function","children":"apt-get"}]," ",["$","span",null,{"className":"token function","children":"install"}]," product을 통해 패키지 설치 ",["$","span",null,{"className":"token punctuation","children":"("}],"설치자 입력 필요",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"2"}],". docker-compose.yml, product.sh 설치 ",["$","span",null,{"className":"token punctuation","children":"("}],"자동",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# postinst"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"1"}],". ",["$","span",null,{"className":"token function","children":"docker"}]," pull image로 이미지 다운로드 ",["$","span",null,{"className":"token punctuation","children":"("}],"자동",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"2"}],". product.sh 실행 ",["$","span",null,{"className":"token punctuation","children":"("}],"자동",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# product.sh"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"1"}],". .env 파일이 있는지 확인하고 있으면 덮어쓸건지, 없으면 새롭게 입력을 받을 수 있는 스크립트 수행\n"]}],["$","span",null,{"className":"code-line","children":["  - 도메인 정보를 입력해주세요 등의 input ",["$","span",null,{"className":"token punctuation","children":"("}],"설치자 입력 필요",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"2"}],". .env 생성, .env 정보를 기반으로 nginx.conf 파일 생성 ",["$","span",null,{"className":"token punctuation","children":"("}],"자동",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"3"}],". ",["$","span",null,{"className":"token function","children":"docker-compose"}]," up ",["$","span",null,{"className":"token parameter variable","children":"-d"}]," 수행 ",["$","span",null,{"className":"token punctuation","children":"("}],"자동",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]]}]}],["$","p",null,{"children":["결국 설치자는 ",["$","code",null,{"children":"sudo apt-get install product"}]," 명령어 입력 후, 한동안 기다렸다가 ",["$","code",null,{"children":".env"}]," 정보를 입력하라는 스크립트가 나오면 입력해주면 설치가 완료되는 구조가 되는 것이죠. 혹시나 갑자기 서버의 문제 때문에 컨테이너가 내려갔다고 하더라도 ",["$","code",null,{"children":"debian"}],"에서 함께 설치된 ",["$","code",null,{"children":"product.sh"}]," 파일만 실행시켜주면 곧바로 프로젝트를 재실행 할 수 있게 됩니다."]}],["$","p",null,{"children":"현재까지는 이미지를 빌드하는 것까지만 해놨는데, 이후에 최종 패키징에 성공한다면 후기를 추가적으로 작성해두겠습니다. 긴 글 읽어주셔서 감사합니다!"}]]}],["$","div",null,{"className":"pb-6 pt-6 text-sm text-gray-700 dark:text-gray-300","children":[["$","a",null,{"target":"_blank","rel":"nofollow","href":"https://mobile.twitter.com/search?q=https%3A%2F%2Fexample.com%2Fblog%2FFE%2FNextJS%20%EB%8F%84%EC%BB%A4%20%EC%A0%81%EC%9A%A9%EA%B8%B0","children":"Discuss on Twitter"}]," • ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/devcdd/devlog/blob/main/data/blog/FE/NextJS 도커 적용기.mdx","children":"View on GitHub"}]]}],["$","div",null,{"className":"pb-6 pt-6 text-center text-gray-700 dark:text-gray-300","id":"comment","children":["$","$L14",null,{"slug":"FE/NextJS 도커 적용기"}]}]]}],["$","footer",null,{"children":[["$","div",null,{"className":"divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y","children":[["$","div",null,{"className":"py-4 xl:py-8","children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Tags"}],["$","div",null,{"className":"flex flex-wrap","children":[["$","$L9",null,{"href":"/tags/nextjs","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"nextJS"}],["$","$L9",null,{"href":"/tags/devops","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"devOps"}],["$","$L9",null,{"href":"/tags/docker","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"docker"}]]}]]}],["$","div",null,{"className":"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8","children":[["$","div",null,{"children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Previous Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L9",null,{"href":"/blog/FE/재빌드 없이 env 변동사항 적용하기","children":"재빌드 없이 env 변동사항 적용하기"}]}]]}],["$","div",null,{"children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Next Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L9",null,{"href":"/blog/FE/사내 프로젝트 패키징 후기","children":"사내 프로젝트 패키징 후기"}]}]]}]]}]]}],["$","div",null,{"className":"pt-4 xl:pt-8","children":["$","$L9",null,{"href":"/blog","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","aria-label":"Back to the blog","children":"← Back to the blog"}]}]]}]]}]]}]}]]}]]
10:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Next.js Docker 적용기 | 디디의 개발일지"}],["$","meta","3",{"name":"description","content":"Next.js로 개발한 프로젝트를 도커 이미지로 만들게 되었는데, 이와 관련해서 작성해봤습니다."}],["$","meta","4",{"name":"robots","content":"index, follow"}],["$","meta","5",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","6",{"rel":"canonical","href":"https://example.com/blog/FE/NextJS%20%EB%8F%84%EC%BB%A4%20%EC%A0%81%EC%9A%A9%EA%B8%B0"}],["$","link","7",{"rel":"alternate","type":"application/rss+xml","href":"https://example.com/feed.xml"}],["$","meta","8",{"property":"og:title","content":"Next.js Docker 적용기"}],["$","meta","9",{"property":"og:description","content":"Next.js로 개발한 프로젝트를 도커 이미지로 만들게 되었는데, 이와 관련해서 작성해봤습니다."}],["$","meta","10",{"property":"og:url","content":"https://example.com/blog/FE/NextJS%20%EB%8F%84%EC%BB%A4%20%EC%A0%81%EC%9A%A9%EA%B8%B0"}],["$","meta","11",{"property":"og:site_name","content":"디디의 개발일지"}],["$","meta","12",{"property":"og:locale","content":"en_US"}],["$","meta","13",{"property":"og:image","content":"https://example.comundefined/"}],["$","meta","14",{"property":"og:type","content":"article"}],["$","meta","15",{"property":"article:published_time","content":"2024-10-25T00:00:00.000Z"}],["$","meta","16",{"property":"article:modified_time","content":"2024-10-25T00:00:00.000Z"}],["$","meta","17",{"property":"article:author","content":"CDD"}],["$","meta","18",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","19",{"name":"twitter:title","content":"Next.js Docker 적용기"}],["$","meta","20",{"name":"twitter:description","content":"Next.js로 개발한 프로젝트를 도커 이미지로 만들게 되었는데, 이와 관련해서 작성해봤습니다."}],["$","meta","21",{"name":"next-size-adjust"}]]
1:null
