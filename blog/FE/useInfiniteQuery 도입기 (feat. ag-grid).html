<!DOCTYPE html><html lang="ko-kr" class="__variable_0aa4ae scroll-smooth"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/2d141e1a38819612-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/41e61cdfe06ece57.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/220f90813d591239.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/cbda1b9e65ea0822.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-99e40001452d121a.js"/><script src="/_next/static/chunks/fd9d1056-255446d42ed5b3e2.js" async=""></script><script src="/_next/static/chunks/23-be8eb25d13eabeb8.js" async=""></script><script src="/_next/static/chunks/main-app-a5fc3ffacb85b471.js" async=""></script><script src="/_next/static/chunks/231-c1dde1c428767cbe.js" async=""></script><script src="/_next/static/chunks/847-5a9cc6e9cff3122a.js" async=""></script><script src="/_next/static/chunks/app/layout-224600f53e7d600b.js" async=""></script><script src="/_next/static/chunks/173-db634e5878be84f7.js" async=""></script><script src="/_next/static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js" async=""></script><script src="https://giscus.app/client.js" data-repo="devcdd/devcdd.github.io" data-repo-id="R_kgDOMQ309g" data-category="General" data-category-id="DIC_kwDOMQ309s4Cgh__" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="ko" crossorigin="anonymous" async=""></script><link rel="preload" href="https://analytics.umami.is/script.js" as="script"/><title>useInfiniteQuery 도입기 (feat. ag-grid) | 디디의 개발일지</title><meta name="description" content="useQuery 기반 사내 프로젝트에서 useInfiniteQuery를 새롭게 도입하게 된 계기, 그리고 어떤식으로 Optimistic Update를 적용했는지에 대해 작성해보려고 합니다."/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><link rel="canonical" href="https://example.com/blog/FE/useInfiniteQuery%20%EB%8F%84%EC%9E%85%EA%B8%B0%20(feat.%20ag-grid)"/><link rel="alternate" type="application/rss+xml" href="https://example.com/feed.xml"/><meta property="og:title" content="useInfiniteQuery 도입기 (feat. ag-grid)"/><meta property="og:description" content="useQuery 기반 사내 프로젝트에서 useInfiniteQuery를 새롭게 도입하게 된 계기, 그리고 어떤식으로 Optimistic Update를 적용했는지에 대해 작성해보려고 합니다."/><meta property="og:url" content="https://example.com/blog/FE/useInfiniteQuery%20%EB%8F%84%EC%9E%85%EA%B8%B0%20(feat.%20ag-grid)"/><meta property="og:site_name" content="디디의 개발일지"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="https://example.comundefined/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-09-07T00:00:00.000Z"/><meta property="article:modified_time" content="2024-09-07T00:00:00.000Z"/><meta property="article:author" content="CDD"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="useInfiniteQuery 도입기 (feat. ag-grid)"/><meta name="twitter:description" content="useQuery 기반 사내 프로젝트에서 useInfiniteQuery를 새롭게 도입하게 된 계기, 그리고 어떤식으로 Optimistic Update를 적용했는지에 대해 작성해보려고 합니다."/><meta name="next-size-adjust"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/cdd-32x32.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/cdd-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/cdd-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="bg-white pl-[calc(100vw-100%)] text-black antialiased dark:bg-gray-950 dark:text-white"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between font-sans"><header class="flex items-center justify-between py-10"><div><a aria-label="9성급 프론트 개발자가 되기 위해 오늘도 달린다" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 512.001 512.001"><path fill="#8c808a" d="M15.364 496.636c-9.818-9.818-9.818-25.737 0-35.555L380.4 96.031c9.819-9.819 25.738-9.819 35.557 0 9.818 9.818 9.818 25.737 0 35.555L50.92 496.636c-9.818 9.819-25.738 9.819-35.556 0"></path><path fill="#7b7179" d="M403.229 118.859 38.192 483.908c-7.575 7.576-18.78 9.3-28.014 5.186a25.1 25.1 0 0 0 5.186 7.542c9.819 9.819 25.738 9.819 35.557 0l365.036-365.05c9.818-9.818 9.818-25.737 0-35.555a25.1 25.1 0 0 0-7.542-5.186c4.113 9.234 2.389 20.439-5.186 28.014"></path><path fill="#e6e2e6" d="M415.956 96.031c-9.818-9.819-25.737-9.819-35.555 0l-52.416 52.418 35.555 35.557 52.416-52.418c9.818-9.819 9.818-25.739 0-35.557"></path><path fill="#d8d1d7" d="M408.414 90.845c4.114 9.234 2.389 20.439-5.186 28.014l-52.417 52.419 12.728 12.728 52.416-52.418c9.818-9.819 9.818-25.738 0-35.556a25 25 0 0 0-7.541-5.187"></path><g fill="#ffdc00"><path d="m223.072 45.428 1.87.838a38.16 38.16 0 0 1 19.215 19.216l.838 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.87a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.838 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.266-5.056 9.444 0 11.71M128.36 188.002l1.87.838a38.16 38.16 0 0 1 19.215 19.215l.839 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.871a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.839 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.268-5.056 9.446 0 11.712M444.651 45.428l1.87.838a38.16 38.16 0 0 1 19.215 19.216l.838 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.87a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.838 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.266-5.056 9.444 0 11.71M431.541 288.532l1.87.838a38.16 38.16 0 0 1 19.215 19.216l.839 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.87a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.839 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.265-5.056 9.444 0 11.71"></path></g><path d="M219.926 51.875h.002l1.872.839a30.7 30.7 0 0 1 15.469 15.47l.84 1.874c2.278 5.083 7.153 8.241 12.723 8.241h.001c5.57 0 10.446-3.158 12.724-8.24l.841-1.874a30.7 30.7 0 0 1 15.467-15.47l1.876-.841c5.083-2.278 8.24-7.154 8.24-12.724s-3.157-10.446-8.241-12.725l-1.874-.84a30.68 30.68 0 0 1-15.469-15.469l-.84-1.874c-2.278-5.083-7.154-8.241-12.725-8.241s-10.446 3.158-12.723 8.241l-.84 1.874A30.7 30.7 0 0 1 221.8 25.585l-1.874.84c-5.083 2.278-8.241 7.154-8.241 12.725s3.157 10.447 8.241 12.725m30.907-35.279a45.7 45.7 0 0 0 22.553 22.554 45.7 45.7 0 0 0-22.553 22.554 45.7 45.7 0 0 0-22.554-22.554 45.7 45.7 0 0 0 22.554-22.554M125.025 194.732l1.874.84a30.7 30.7 0 0 1 15.47 15.471l.839 1.872c2.277 5.084 7.153 8.243 12.723 8.243h.001c5.57 0 10.446-3.158 12.724-8.241l.84-1.874a30.68 30.68 0 0 1 15.469-15.47l1.875-.84c5.083-2.278 8.24-7.154 8.24-12.725s-3.158-10.446-8.241-12.725l-1.874-.84a30.68 30.68 0 0 1-15.469-15.47l-.84-1.874c-2.279-5.083-7.154-8.242-12.726-8.241-5.57 0-10.445 3.158-12.723 8.24l-.841 1.876a30.7 30.7 0 0 1-15.469 15.47l-1.873.839c-5.083 2.279-8.241 7.154-8.241 12.725.001 5.57 3.159 10.446 8.242 12.724m30.908-35.278a45.7 45.7 0 0 0 22.554 22.554 45.7 45.7 0 0 0-22.554 22.555 45.7 45.7 0 0 0-22.554-22.554 45.7 45.7 0 0 0 22.554-22.555M503.761 26.426l-1.874-.84a30.69 30.69 0 0 1-15.469-15.469l-.84-1.874C483.3 3.16 478.425.001 472.854.001h-.001c-5.57 0-10.446 3.158-12.725 8.241l-.84 1.874a30.7 30.7 0 0 1-15.469 15.47l-1.873.84c-5.083 2.278-8.241 7.154-8.241 12.725s3.158 10.447 8.241 12.725h.001l1.872.839a30.68 30.68 0 0 1 15.469 15.47l.84 1.874c2.279 5.083 7.154 8.241 12.725 8.241s10.445-3.158 12.723-8.24l.84-1.874a30.69 30.69 0 0 1 15.468-15.47l1.875-.84c5.083-2.278 8.241-7.154 8.241-12.725.001-5.572-3.157-10.447-8.239-12.725m-30.908 35.278a45.7 45.7 0 0 0-22.554-22.554 45.7 45.7 0 0 0 22.554-22.554 45.7 45.7 0 0 0 22.554 22.554 45.7 45.7 0 0 0-22.554 22.554M490.624 270.012l-1.874-.84a30.69 30.69 0 0 1-15.469-15.469l-.84-1.874c-2.278-5.083-7.154-8.242-12.725-8.241-5.57 0-10.446 3.158-12.723 8.239l-.842 1.876a30.68 30.68 0 0 1-15.468 15.469l-1.874.84c-5.083 2.279-8.241 7.154-8.241 12.725s3.158 10.447 8.241 12.725h.001l1.872.839a30.7 30.7 0 0 1 15.47 15.472l.84 1.872c2.278 5.083 7.153 8.242 12.724 8.242h.001c5.57 0 10.446-3.158 12.724-8.241l.84-1.874a30.68 30.68 0 0 1 15.467-15.469l1.876-.84c5.083-2.278 8.24-7.154 8.24-12.725.001-5.572-3.157-10.448-8.24-12.726m-30.907 35.279a45.7 45.7 0 0 0-22.554-22.555 45.7 45.7 0 0 0 22.554-22.555 45.7 45.7 0 0 0 22.553 22.555 45.7 45.7 0 0 0-22.553 22.555M224.767 312.226 45.191 491.809c-6.893 6.893-18.107 6.892-25 0-6.892-6.892-6.892-18.106 0-24.998l45.002-45.004a7.515 7.515 0 1 0-10.628-10.628L9.564 456.183c-12.752 12.752-12.752 33.501 0 46.253C15.94 508.813 24.316 512 32.691 512s16.751-3.188 23.127-9.564l179.576-179.582a7.515 7.515 0 0 0-10.627-10.628"></path><path d="M421.581 90.407c-6.177-6.178-14.391-9.58-23.127-9.58s-16.95 3.402-23.128 9.58L362.834 102.9a7.516 7.516 0 0 0 10.628 10.627l12.491-12.493c3.339-3.339 7.778-5.178 12.5-5.178s9.161 1.839 12.5 5.178c6.892 6.892 6.892 18.106 0 24.998l-47.207 47.209-24.998-24.999 13.459-13.46a7.514 7.514 0 0 0 0-10.627 7.514 7.514 0 0 0-10.628 0l-18.771 18.772-.002.002-.002.002L75.821 389.923c-2.736 2.736-2.918 7.255-.399 10.196 2.81 3.282 7.97 3.488 11.027.431L328.12 158.87l24.999 25-107.097 107.101c-2.736 2.736-2.918 7.255-.399 10.196 2.81 3.282 7.97 3.488 11.027.431L421.581 136.66c12.752-12.751 12.752-33.501 0-46.253"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">9성급 프론트 개발자가 되기 위해 오늘도 달린다</div></div></a></div><div class="flex items-center space-x-4 leading-5 sm:space-x-6"><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/blog">Blog</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/tags">Tags</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/about">About</a><button aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6 text-gray-900 dark:text-gray-100"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg></button><div class="mr-5"><div class="relative inline-block text-left" data-headlessui-state=""><div><button id="headlessui-menu-button-:Rn6jaja:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-6 w-6 text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path></svg></button></div></div></div><button aria-label="Toggle Menu" class="sm:hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-8 w-8 text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed left-0 top-0 z-10 h-full w-full transform bg-white opacity-95 duration-300 ease-in-out dark:bg-gray-950 dark:opacity-[0.98] translate-x-full"><div class="flex justify-end"><button class="mr-8 mt-11 h-8 w-8" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/">Home</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></header><main class="mb-auto"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"useInfiniteQuery 도입기 (feat. ag-grid)","datePublished":"2024-09-07T00:00:00.000Z","dateModified":"2024-09-07T00:00:00.000Z","description":"useQuery 기반 사내 프로젝트에서 useInfiniteQuery를 새롭게 도입하게 된 계기, 그리고 어떤식으로 Optimistic Update를 적용했는지에 대해 작성해보려고 합니다.","url":"https://example.com/blog/FE/useInfiniteQuery 도입기 (feat. ag-grid)","author":[{"@type":"Person","name":"CDD"}]}</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed bottom-8 right-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2024-09-07T00:00:00.000Z">2024년 9월 7일 토요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">useInfiniteQuery 도입기 (feat. ag-grid)</h1></div></div></header><div class="grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0"><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img alt="avatar" loading="lazy" width="38" height="38" decoding="async" data-nimg="1" class="h-10 w-10 rounded-full" style="color:transparent" src="/static/images/avatar.png"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">CDD</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pb-8 pt-10 dark:prose-invert"><h2 class="content-header" id="서론"><a href="#서론" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>서론</h2><p>현재 사내 서비스에서는 그리드 내에서 데이터를 무한 스크롤 형식으로 <code>Fetching</code> 하는 로직이 굉장히 많이 존재합니다. 하지만 방식이 통일 되어있지 않고 버그도 빈번하게 발생합니다. 이런 문제를 인지하고는 있었으나 기능 개발에 몰두한다고 미뤄뒀던 문제를이자 그리드 로직의 통일을 위해서라도 선임 개발자님이 해결해보자고 제안했고, 이후 과정에 대해서 글을 작성해보려고 합니다. 이를 설명하기 위해서는 기존 로직의 문제점부터 설명을 하고 넘어가는 것이 맞다고 생각해서 이를 먼저 설명하고 넘어가려고 합니다.</p><ul class=""><li class=""><a href="#기존-로직의-문제점">기존 로직의 문제점</a><ul class=""><li class=""><a href="#현재-데이터를-fetch-하여-그리드에-적용시키는-방식">현재 데이터를 Fetch 하여 그리드에 적용시키는 방식</a></li><li class=""><a href="#기능만-작동하면-되는-거-아니야-뭐-문제가-있어">기능만 작동하면 되는 거 아니야? 뭐 문제가 있어?</a></li><li class=""><a href="#캐싱-데이터를-전혀-활용하지-못한다니">캐싱 데이터를 전혀 활용하지 못한다니..?</a></li><li class=""><a href="#서버와-일관된-데이터를-보여주지-못한다고-그게-무슨-소리야">서버와 일관된 데이터를 보여주지 못한다고..? 그게 무슨 소리야?</a></li></ul></li><li class=""><a href="#useinfinitequery를-도입하는-것은-어떨까요">useInfiniteQuery를 도입하는 것은 어떨까요?</a><ul class=""><li class=""><a href="#새롭게-데이터-fetching-할-때-스크롤-최상단-방어">새롭게 데이터 Fetching 할 때 스크롤 최상단 방어</a><ul class=""><li class=""><a href="#여기서-변수">여기서 변수</a></li></ul></li><li class=""><a href="#서버와-일관된-데이터를-보여주기-위한-방법">서버와 일관된 데이터를 보여주기 위한 방법</a><ul class=""><li class=""><a href="#useinfinitequery에-대한-간단한-설명">useInfiniteQuery에 대한 간단한 설명</a></li></ul></li><li class=""><a href="#optimistic-update-적용">Optimistic Update 적용</a></li></ul></li><li class=""><a href="#최종적인-workflow">최종적인 Workflow</a></li><li class=""><a href="#마치며">마치며</a></li></ul><h2 class="content-header" id="기존-로직의-문제점"><a href="#기존-로직의-문제점" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>기존 로직의 문제점</h2><h3 class="content-header" id="현재-데이터를-fetch-하여-그리드에-적용시키는-방식"><a href="#현재-데이터를-fetch-하여-그리드에-적용시키는-방식" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>현재 데이터를 Fetch 하여 그리드에 적용시키는 방식</h3><p><code>ag-grid</code>를 사용하는 환경에서는 고질적인 문제가 있었습니다. 바로 데이터를 <code>Fetch</code> 해서 <code>set</code> 해줄 때 <code>rowData</code>가 새롭게 정의되면서 스크롤이 최상단으로 올라가게 됩니다. 해결책을 찾아보기 전에 기존에 구현해놨던 코드를 보니 <code>ag-grid</code> 내의 함수 중 하나인 <code>applyTransaction()</code>를 사용했더군요. 이는 <code>ag-grid</code> 내부에서 가지고 있는 데이터의 값을 바꿔주는 목적으로 사용됩니다. 이를 통해 <code>Optimistic</code>한 업데이트를 구현할 수 있는 것이죠. 아래의 예제 코드를 보시죠.</p><div class="relative"><pre><code class="code-highlight language-ts"><span class="code-line"><span class="token keyword">const</span> Transaction <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">      add<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">          <span class="token punctuation">{</span>employeeId<span class="token operator">:</span> <span class="token string">&#x27;4&#x27;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#x27;Billy&#x27;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">55</span><span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      update<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">          <span class="token punctuation">{</span>employeeId<span class="token operator">:</span> <span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#x27;Bob&#x27;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      remove<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">          <span class="token punctuation">{</span>employeeId<span class="token operator">:</span> <span class="token string">&#x27;5&#x27;</span><span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">]</span>
</span><span class="code-line"> <span class="token punctuation">}</span>
</span></code></pre></div><p>그래서 추가/수정/삭제 로직이 일어날 때마다 <code>refetch</code> 없이 낙관적 업데이트를 진행해왔고, 심지어 무한 스크롤을 구현할 때도 이러한 방식을 사용했습니다. 예시 코드를 하나 준비했습니다.</p><div class="relative"><pre><code class="code-highlight language-ts"><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable">onBodyScroll</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> BodyScrollEvent<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchMoreData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  e<span class="token punctuation">.</span>api<span class="token punctuation">.</span><span class="token function">applyTransaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    add<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>data<span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>결국 원본 데이터는 <code>ag-grid</code>에 맡긴 채 저희는 <code>Transaction</code>만 적용해주고, 진짜 <code>Refetch</code>가 필요하다면 데이터를 다시 다 날려서 첫 데이터부터 다시 받아오는 방식을 사용하고 있었던 것이죠. 그래서 가능하다면 <code>refetch</code>를 안하는 쪽으로 코드를 구현했습니다.</p><h3 class="content-header" id="기능만-작동하면-되는-거-아니야-뭐-문제가-있어"><a href="#기능만-작동하면-되는-거-아니야-뭐-문제가-있어" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>기능만 작동하면 되는 거 아니야? 뭐 문제가 있어?</h3><p>개인적으로는 2가지의 문제가 있다고 생각합니다. 첫 번째는 <code>react query</code>를 기술 스택으로 삼았음에도 캐싱 데이터를 전혀 활용하고 있지 못한다는 점, 그리고 두 번째는 데이터의 추가/삭제가 일어났을 때 서버와 일관된 데이터를 보여주지 못한다는 점입니다. 하나씩 설명해보려고 합니다.</p><h3 class="content-header" id="캐싱-데이터를-전혀-활용하지-못한다니"><a href="#캐싱-데이터를-전혀-활용하지-못한다니" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>캐싱 데이터를 전혀 활용하지 못한다니..?</h3><p>우선적으로 기존 코드를 그대로 들고온 상황인만큼 현재의 데이터 <code>Fetching</code> 방식도 <code>useQuery</code>를 통해 첫 번째 페이지의 데이터를 받아오고, 이후 데이터는 모두 <code>addTransaction</code>으로 넣어줍니다. 쿼리키 변동이 잦아 데이터 교체가 빈번하게 이뤄지는 상황에서 정작 캐싱을 할 수 있는 건 첫 번째 페이지 뿐인 것이죠. 좀 더 자세한 예시를 들어 설명 해보겠습니다.</p><p>저희 사내 서비스는 한 유저가 여러 그룹에 속할 수 있는데, 그룹마다 다른 데이터를 뿌려줘야 합니다. 그래서 그룹에 대한 정보가 <code>queryKey</code>의 일부로 들어가있고, 그룹의 변동이 일어날 때마다 <code>queryKey</code> 값이 바뀌게 되면서 새로운 데이터를 <code>Fetching</code> 하게 됩니다.</p><div class="relative"><pre><code class="code-highlight language-mdx"><span class="code-line">1. 그룹 1의 데이터 (1-10)페이지 만큼 Fetch
</span><span class="code-line">2. 그룹 2 선택
</span><span class="code-line">3. 그룹 1 선택
</span><span class="code-line">4. 그룹 1의 데이터는 1페이지만 캐싱되어 있음
</span><span class="code-line">5. 다시 그룹 1의 (1-10)페이지까지의 데이터를 얻기 위해 계속해서 무한 스크롤을 해야 됨
</span></code></pre></div><h3 class="content-header" id="서버와-일관된-데이터를-보여주지-못한다고-그게-무슨-소리야"><a href="#서버와-일관된-데이터를-보여주지-못한다고-그게-무슨-소리야" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>서버와 일관된 데이터를 보여주지 못한다고..? 그게 무슨 소리야?</h3><p>물론 완벽하게는 힘들겠지만, 그렇다해도 현재는 완성도가 너무 떨어집니다. 이것도 예시를 들어서 설명해보겠습니다.</p><div class="relative"><pre><code class="code-highlight language-mdx"><span class="code-line">- 데이터는 순서대로 1번, 2번, 3번 ...의 ID를 가지고 있다고 가정합니다.
</span><span class="code-line">- 한 번의 Fetch 당 데이터를 100개씩 들고온다고 가정합니다.
</span><span class="code-line">
</span><span class="code-line">1. 클라이언트에서 100개의 데이터 중 98번, 99번, 100번 데이터를 삭제 및 낙관적 업데이트
</span><span class="code-line">2. 클라이언트의 마지막 데이터는 97번 데이터가 됨
</span><span class="code-line">3. 서버에서는 101번, 102번, 103번 데이터가 기존의 98, 99, 100번 데이터의 자리를 대체
</span><span class="code-line">4. 클라이언트에서 refetch
</span><span class="code-line">5. 서버에서는 104번 데이터부터 203번까지의 데이터를 보내줌
</span><span class="code-line">6. 101번 - 103번의 데이터는 어디에..?
</span></code></pre></div><p>결국 아무리 스크롤을 내려도 101번에서 103번까지의 데이터는 새로고침을 하지 않는 이상 찾지 못하게 된다는 것이죠. 이러한 과정이 반복될수록 서버와의 데이터 일관성을 점점 더 잃어갑니다.</p><h2 class="content-header" id="useinfinitequery를-도입하는-것은-어떨까요"><a href="#useinfinitequery를-도입하는-것은-어떨까요" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>useInfiniteQuery를 도입하는 것은 어떨까요?</h2><p>생각해보니 위의 두 가지 문제점을 완벽히 해결할 수 있을만한 방법이 바로 <code>useInfiniteQuery</code>를 사용하는 것이었습니다. 사이드 프로젝트에서 한 번 써보기는 했는데, 사내 프로젝트를 위해서는 추가적인 기술 검토가 필요했기에 테스트 프로젝트를 하나 더 만들어서 여러가지 테스트를 해봤습니다.</p><h3 class="content-header" id="새롭게-데이터-fetching-할-때-스크롤-최상단-방어"><a href="#새롭게-데이터-fetching-할-때-스크롤-최상단-방어" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>새롭게 데이터 <code>Fetching</code> 할 때 스크롤 최상단 방어</h3><p>몇 개월 전의 기억을 더듬어 보니 회사 동료 중 한 명에게 스크롤이 최상단으로 가는 것을 막을 수 있는 방법이 있다고 들어서 관련해서 공식문서를 뒤져보니 <code>AgGridReact</code> 컴포넌트 <code>props</code> 중에 <code>suppressScrollOnNewData</code>라는 옵션이 있더군요. 이를 <code>true</code> 값으로 변경해주면 무한 스크롤 중에 새로운 데이터가 들어왔을 때 스크롤이 최상단으로 올라가지 않게 되어 캐싱하고 있는 데이터 그대로 그리드에 넣어줄 수 있게 됩니다.</p><h4 class="content-header" id="여기서-변수"><a href="#여기서-변수" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>여기서 변수</h4><p>하지만, 강제로 스크롤을 최상단으로 올려야 하는 경우도 있습니다. 예를 들어 그룹 1에서 400 번째 데이터를 보다가 그룹 2로 갔는데도 그룹 2의 400번째 데이터가 나오면 안되겠죠. 정책 상으로도 첫 번째 데이터부터 보여줘야 해서 추가적인 방법을 찾아야 했습니다. <code>suppressScrollOnNewData</code>의 값을 토글링 해주는 방법을 생각했었습니다.</p><div class="relative"><pre><code class="code-highlight language-python"><span class="code-line"><span class="token comment"># 첫번째 방법</span>
</span><span class="code-line"><span class="token number">1.</span> 그룹이 변경되면 data가 잠시 undefined <span class="token operator">/</span> null로 됨
</span><span class="code-line"><span class="token number">2.</span> 이를 감지하여 토글 시키는 방식
</span><span class="code-line"><span class="token number">3.</span> data가 캐싱되어 있으면 data는 항상 존재하기에 실패
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 두번째 방법</span>
</span><span class="code-line"><span class="token number">1.</span> suppressScrollOnNewData를 관리해 줄 State를 하나 만들어줌
</span><span class="code-line"><span class="token number">2.</span> 그룹이 변경되면 수동으로 State를 토글 시킴
</span><span class="code-line"><span class="token number">3.</span> 구조가 이상한 것 같음 <span class="token punctuation">(</span>state를 바꿔 그리드를 리렌더링 시키고<span class="token punctuation">,</span> 이후에 데이터를 Fetching 해야됨<span class="token punctuation">)</span>
</span></code></pre></div><p>&#x27;<code>querySelector</code> 같은 걸로 요소 찾고 스크롤을 강제로 올려줘야 하나?&#x27; 하면서 조금 더 서칭을 해본 결과 <code>ag-grid</code> 내에서 스크롤을 최상단으로 올리는 함수를 지원한다는 것을 알게되었습니다. 그것은 바로 <code>ensureIndexVisible(0, &quot;top&quot;)</code>인데요, 아무리 검색해도 안나오더니 <code>GPT</code>가 도와줬습니다, (<del>넌 이런 것까지 어떻게 아는거니..?</del>). 이제 스크롤에 대한 문제는 완벽히 해결되었으니 다음 문제를 찾으러 가보죠.</p><h3 class="content-header" id="서버와-일관된-데이터를-보여주기-위한-방법"><a href="#서버와-일관된-데이터를-보여주기-위한-방법" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>서버와 일관된 데이터를 보여주기 위한 방법</h3><h4 class="content-header" id="useinfinitequery에-대한-간단한-설명"><a href="#useinfinitequery에-대한-간단한-설명" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a><code>useInfiniteQuery</code>에 대한 간단한 설명</h4><p><code>useInfiniteQuery</code>의 구조를 한 번 보고 넘어가면 좋을 것 같아 간단하게 코드를 작성해봤습니다.</p><div class="relative"><pre><code class="code-highlight language-ts"><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> fetchNextPage<span class="token punctuation">,</span> hasNextPage<span class="token punctuation">,</span> isFetching<span class="token punctuation">,</span> isFetchingNextPage <span class="token punctuation">}</span> <span class="token operator">=</span>
</span><span class="code-line">    <span class="token generic-function"><span class="token function">useInfiniteQuery</span><span class="token class-name generic"><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">      queryKey<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token function function-variable">queryFn</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> pageParam <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">          key<span class="token operator">:</span> key<span class="token operator">!</span><span class="token punctuation">,</span>
</span><span class="code-line">          offset<span class="token operator">:</span> page<span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      enabled<span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>key<span class="token punctuation">,</span> <span class="token comment">// key가 있을 때만 활성화</span>
</span><span class="code-line">      <span class="token function function-variable">getNextPageParam</span><span class="token operator">:</span> <span class="token punctuation">(</span>lastPage<span class="token punctuation">,</span> allPages<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>lastPage<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token constant">PAGE_SIZE</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">return</span> allPages<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token constant">PAGE_SIZE</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><p>이렇게 코드를 작성하게 된다면 <code>data</code>에는 어떤 데이터가 들어오게 될까요? 아래와 같습니다.</p><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line">data <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token literal-property property">pages</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token punctuation">[</span>data1 <span class="token operator">-</span> data100<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 첫 번째 페이지</span>
</span><span class="code-line">    <span class="token punctuation">[</span>data101 <span class="token operator">-</span> data200<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 두 번째 페이지</span>
</span><span class="code-line">    <span class="token operator spread">...</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token literal-property property">pageParams</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator spread">...</span><span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>여기서 제일 중요한 것은 바로 <code>pageParams</code>인데요, <code>getNextPageParam</code> 함수로 리턴해주는 값이 <code>pageParams</code> 배열에 <code>push</code>되는 형태로 됩니다. 제가 예시로 적어둔 <code>0, 100, ...</code>이라는 값은 모두 <code>getNextPageParam</code> 함수에서 리턴해줬던 값인 것이죠.</p><p>자, 그럼 이게 왜 중요할까요? 바로 <code>invalidate</code>에 있습니다. 일반적으로 <code>useQuery</code>에서 <code>invalidate</code>를 시키면 당연하게도 <strong>한 번</strong> 리페칭을 하게 되는데, <code>useInfiniteQuery</code>에서는 <code>pageParms</code>에 있는 모든 값들을 활용하여 <code>refetch</code> 로직을 수행합니다. 예를 들어 <code>pageParams</code>에 <code>[0, 100, 200]</code>이 있다면 <code>invalidate</code>를 시켰을 때 <code>0, 100, 200</code> 페이지의 데이터를 모두 <code>refetch</code>하게 되는 방식입니다.</p><h3 class="content-header" id="optimistic-update-적용"><a href="#optimistic-update-적용" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>Optimistic Update 적용</h3><p>자, 그러면 이제 <code>Optimistic Update</code>를 고민해봐야 하는데요, 기존에는 <code>applyTransaction</code>을 사용하여 이를 진행했었죠? 하지만 여기서 의심이 하나 들었습니다. 이것도 풀어서 설명하기는 에매해서 아래에 예시를 하나 만들어봤습니다.</p><div class="relative"><pre><code class="code-highlight language-python"><span class="code-line"><span class="token number">1.</span> <span class="token number">1000</span>개 <span class="token punctuation">(</span><span class="token number">1</span>페이지 당 <span class="token number">100</span>개의 데이터니까 <span class="token number">10</span>페이지<span class="token punctuation">)</span>의 데이터를 가지고 있다고 가정합니다<span class="token punctuation">.</span>
</span><span class="code-line"><span class="token number">2.</span> <span class="token number">999</span>번째 데이터의 정보를 수정한 후<span class="token punctuation">,</span> applyTransaction을 통해 낙관적 업데이트를 수행합니다<span class="token punctuation">.</span>
</span><span class="code-line"><span class="token number">3.</span> invalidate를 시킵니다<span class="token punctuation">.</span> <span class="token punctuation">(</span><span class="token number">1000</span>개의 데이터를 다시 받아오겠죠?<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token number">4.</span> fetch는 순차적으로 이뤄져서 첫 번째 페이지부터 두 번째<span class="token punctuation">,</span> 세 번째 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> refetch를 진행합니다<span class="token punctuation">.</span>
</span><span class="code-line"><span class="token number">5.</span> 마지막 페이지가 refetch 될 때까지 applyTransaction으로 바꾼 데이터는 보존이 될까?
</span><span class="code-line"><span class="token number">6.</span> 이론상 캐싱된 데이터가 <span class="token builtin">set</span> 되서 applyTransaction으로 만든 데이터가 날라갈 것 같다는 생각이 듦
</span></code></pre></div><p>그래서 곧바로 테스트 프로젝트에서 테스팅을 해봤는데, 예상대로 <code>applyTransaction</code>으로 적용한 낙관적 업데이트가 다시 사라져버리더군요. 깨달았습니다, <strong>수동적으로 캐싱된 데이터를 바꿔줘야 하는구나</strong>. 다행히도 여기에 대한 해답은 빨리 찾아냈는데, 바로 <code>setQueryData</code>라는 것입니다. 말 그대로 <code>queryData</code> 자체를 바꿀 수 있는 함수인데요, 사용방법은 아래와 같습니다.</p><div class="relative"><pre><code class="code-highlight language-ts"><span class="code-line"><span class="token keyword">const</span> queryClient <span class="token operator">=</span> <span class="token function">useQueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable">optimisticUpdate</span> <span class="token operator">=</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  queryClient<span class="token punctuation">.</span><span class="token function">setQueryData</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>oldData<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>oldData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">return</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token operator">...</span>oldData<span class="token punctuation">,</span>
</span><span class="code-line">      pages<span class="token operator">:</span> oldData<span class="token punctuation">.</span>pages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>page<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
</span><span class="code-line">        page<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token keyword">return</span> item<span class="token punctuation">.</span>key <span class="token operator">===</span> key
</span><span class="code-line">            <span class="token operator">?</span> <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token operator">...</span>item<span class="token punctuation">,</span>
</span><span class="code-line">                name<span class="token operator">:</span> <span class="token string">&quot;수정된 데이터&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">              <span class="token punctuation">}</span>
</span><span class="code-line">            <span class="token operator">:</span> item<span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre></div><p>첫 번째 파라미터로는 데이터를 관리하고 있는 쿼리의 <code>queryKey</code> 값을 넣어주면, 두 번째로 들어가는 콜백 함수는 해당 쿼리키가 가지고 있는 캐시값을 파라미터로 던져줍니다. 바로 그것이 <code>oldData</code>가 되는 것이죠. 그러면 이 <code>oldData</code>를 가공해서 원하는 모양으로 만들어주면 됩니다. 이렇게 하면 <code>refetch</code>를 해도 <code>Optimistic Update</code>가 사라지지 않게 되겠죠?</p><h2 class="content-header" id="최종적인-workflow"><a href="#최종적인-workflow" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>최종적인 Workflow</h2><ol><li>useInfiniteQuery를 통해 데이터를 Fetch한다.</li><li>데이터를 추가, 업데이트, 삭제할 시 setQueryData를 사용하여 직접적으로 캐시 자체를 업데이트 한다 (Optimistic Update).</li><li>invalidateQueries를 통해 전체 데이터를 리프레시 해온다.</li></ol><p>다만 <code>invalidate</code>는 서버에 부하가 갈수도 있는만큼 조심해서 수행해야 할 것 같습니다. 과도하게 말고 데이터의 불일치 문제가 자주 발생하는 상황이 예상되는 케이스 같은 경우(e.g. 데이터 삭제)에만 적용을 해주는 쪽으로 생각해봐야 할 것 같습니다.</p><h2 class="content-header" id="마치며"><a href="#마치며" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg class="h-5 linkicon w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>마치며</h2><p>사실 <code>useInfiniteQuery</code>는 이전에 사이드 프로젝트에서도 사용했었는데, 그때는 사용했던 이유가 다른 페이지로 이동했다가 <code>popState</code> 같은 동작을 수행했을 때 데이터를 다시 처음부터 받아오는 것을 방지하기 위함이었습니다. 당시에는 로직 구현에만 급급했어서 자세한 동작 원리를 이해하지 못했었는데, 이번 기회로 <code>useInfiniteQuery</code>에 대한 이해도가 높아진 것 같은 느낌이 듭니다. 추가적인 <code>TroubleShoot</code>이 생긴다면 이후에 글을 추가하는 방향도 고려해보겠습니다.</p><p>아마 <code>ag-grid</code>에서 <code>useInfiniteQuery</code>를 사용하는 환경인 경우 이 글이 큰 도움이 될 것 같네요. 긴 글 읽어주셔서 감사합니다!</p></div><div class="pb-6 pt-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fexample.com%2Fblog%2FFE%2FuseInfiniteQuery%20%EB%8F%84%EC%9E%85%EA%B8%B0%20(feat.%20ag-grid)">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/devcdd/devlog/blob/main/data/blog/FE/useInfiniteQuery 도입기 (feat. ag-grid).mdx">View on GitHub</a></div><div class="pb-6 pt-6 text-center text-gray-700 dark:text-gray-300" id="comment"><button>Load Comments</button></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/typescript">typescript</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/nextjs">nextJS</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/reactjs">reactJS</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/react-query">react-query</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/useinfinitequery">useInfiniteQuery</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/ag-grid">ag-grid</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/FE/리액트 단에서 미디어 쿼리 구현하기">리액트 단에서 미디어 쿼리 구현하기</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/retrospect/여유로울 때 쓰는 회고">여유로울 때 쓰는 회고</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" aria-label="Back to the blog" href="/blog">← Back to the blog</a></div></footer></div></div></article></section></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/devcdd"><span class="sr-only">github</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6"><title>Github</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://youtube.com/@cdd_world"><span class="sr-only">youtube</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6"><title>Youtube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.instagram.com/cdd_world"><span class="sr-only">instagram</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>CDD</div><div> • </div><div>© 2024</div><div> • </div><a href="/">디디의 개발일지</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/devcdd">CDD GITHUB</a></div></div></footer></div></section><script src="/_next/static/chunks/webpack-99e40001452d121a.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/2d141e1a38819612-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/41e61cdfe06ece57.css\",\"style\"]\n3:HL[\"/_next/static/css/220f90813d591239.css\",\"style\"]\n4:HL[\"/_next/static/css/cbda1b9e65ea0822.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"5:I[5751,[],\"\"]\n8:I[9275,[],\"\"]\na:I[1343,[],\"\"]\nb:I[8700,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"847\",\"static/chunks/847-5a9cc6e9cff3122a.js\",\"185\",\"static/chunks/app/layout-224600f53e7d600b.js\"],\"ThemeProviders\"]\nc:I[4080,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"847\",\"static/chunks/847-5a9cc6e9cff3122a.js\",\"185\",\"static/chunks/app/layout-224600f53e7d600b.js\"],\"\"]\nd:I[9032,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"847\",\"static/chunks/847-5a9cc6e9cff3122a.js\",\"185\",\"static/chunks/app/layout-224600f53e7d600b.js\"],\"KBarSearchProvider\"]\ne:I[231,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"173\",\"static/chunks/173-db634e5878be84f7.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js\"],\"\"]\n11:I[509,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"847\",\"static/chunks/847-5a9cc6e9cff3122a.js\",\"185\",\"static/chunks/app/layout-224600f53e7d600b.js\"],\"KBarButton\"]\n12:I[1398,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"847\",\"static/chunks/847-5a9cc6e9cff3122a.js\",\"185\",\"static/chunks/app/layout-224600f53e7d600b.js\"],\"default\"]\n13:I[8976,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"847\",\"static/chunks/847-5a9cc6e9cff3122a.js\",\"185\",\"static/chunks/app/layout-224600f53e7d600b.js\"],\"default\"]\n16:I[6130,[],\"\"]\n9:[\"slug\",\"FE/useInfiniteQuery%20%EB%8F%84%EC%9E%85%EA%B8%B0%20(feat.%20ag-grid)\",\"c\"]\nf:T59b,m223.072 45.428 1.87.838a38.16 38.16 0 0 1 19.215 19.216l.838 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.87a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.838 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.266-5.056 9.444 0 11.71M128.36 188.002l1.87.838a38.16 38.16 0 0 1 19.215 19.215l.839 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.871a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.839 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.2"])</script><script>self.__next_f.push([1,"68-5.056 9.446 0 11.712M444.651 45.428l1.87.838a38.16 38.16 0 0 1 19.215 19.216l.838 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.87a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.838 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.266-5.056 9.444 0 11.71M431.541 288.532l1.87.838a38.16 38.16 0 0 1 19.215 19.216l.839 1.871c2.266 5.056 9.444 5.056 11.71 0l.838-1.87a38.16 38.16 0 0 1 19.215-19.216l1.87-.838c5.056-2.266 5.056-9.445 0-11.711l-1.87-.838a38.16 38.16 0 0 1-19.215-19.216l-.838-1.87c-2.266-5.056-9.444-5.056-11.71 0l-.839 1.871a38.16 38.16 0 0 1-19.215 19.215l-1.87.838c-5.056 2.265-5.056 9.444 0 11.7110:Tb1a,"])</script><script>self.__next_f.push([1,"M219.926 51.875h.002l1.872.839a30.7 30.7 0 0 1 15.469 15.47l.84 1.874c2.278 5.083 7.153 8.241 12.723 8.241h.001c5.57 0 10.446-3.158 12.724-8.24l.841-1.874a30.7 30.7 0 0 1 15.467-15.47l1.876-.841c5.083-2.278 8.24-7.154 8.24-12.724s-3.157-10.446-8.241-12.725l-1.874-.84a30.68 30.68 0 0 1-15.469-15.469l-.84-1.874c-2.278-5.083-7.154-8.241-12.725-8.241s-10.446 3.158-12.723 8.241l-.84 1.874A30.7 30.7 0 0 1 221.8 25.585l-1.874.84c-5.083 2.278-8.241 7.154-8.241 12.725s3.157 10.447 8.241 12.725m30.907-35.279a45.7 45.7 0 0 0 22.553 22.554 45.7 45.7 0 0 0-22.553 22.554 45.7 45.7 0 0 0-22.554-22.554 45.7 45.7 0 0 0 22.554-22.554M125.025 194.732l1.874.84a30.7 30.7 0 0 1 15.47 15.471l.839 1.872c2.277 5.084 7.153 8.243 12.723 8.243h.001c5.57 0 10.446-3.158 12.724-8.241l.84-1.874a30.68 30.68 0 0 1 15.469-15.47l1.875-.84c5.083-2.278 8.24-7.154 8.24-12.725s-3.158-10.446-8.241-12.725l-1.874-.84a30.68 30.68 0 0 1-15.469-15.47l-.84-1.874c-2.279-5.083-7.154-8.242-12.726-8.241-5.57 0-10.445 3.158-12.723 8.24l-.841 1.876a30.7 30.7 0 0 1-15.469 15.47l-1.873.839c-5.083 2.279-8.241 7.154-8.241 12.725.001 5.57 3.159 10.446 8.242 12.724m30.908-35.278a45.7 45.7 0 0 0 22.554 22.554 45.7 45.7 0 0 0-22.554 22.555 45.7 45.7 0 0 0-22.554-22.554 45.7 45.7 0 0 0 22.554-22.555M503.761 26.426l-1.874-.84a30.69 30.69 0 0 1-15.469-15.469l-.84-1.874C483.3 3.16 478.425.001 472.854.001h-.001c-5.57 0-10.446 3.158-12.725 8.241l-.84 1.874a30.7 30.7 0 0 1-15.469 15.47l-1.873.84c-5.083 2.278-8.241 7.154-8.241 12.725s3.158 10.447 8.241 12.725h.001l1.872.839a30.68 30.68 0 0 1 15.469 15.47l.84 1.874c2.279 5.083 7.154 8.241 12.725 8.241s10.445-3.158 12.723-8.24l.84-1.874a30.69 30.69 0 0 1 15.468-15.47l1.875-.84c5.083-2.278 8.241-7.154 8.241-12.725.001-5.572-3.157-10.447-8.239-12.725m-30.908 35.278a45.7 45.7 0 0 0-22.554-22.554 45.7 45.7 0 0 0 22.554-22.554 45.7 45.7 0 0 0 22.554 22.554 45.7 45.7 0 0 0-22.554 22.554M490.624 270.012l-1.874-.84a30.69 30.69 0 0 1-15.469-15.469l-.84-1.874c-2.278-5.083-7.154-8.242-12.725-8.241-5.57 0-10.446 3.158-12.723 8.239l-.842 1.876a30.68 30.68 0 0 1-15.468 15.469l-1.874.84c-5.083 2.279-8.241 7.154-8.241 12.725s3.158 10.447 8.241 12.725h.001l1.872.839a30.7 30.7 0 0 1 15.47 15.472l.84 1.872c2.278 5.083 7.153 8.242 12.724 8.242h.001c5.57 0 10.446-3.158 12.724-8.241l.84-1.874a30.68 30.68 0 0 1 15.467-15.469l1.876-.84c5.083-2.278 8.24-7.154 8.24-12.725.001-5.572-3.157-10.448-8.24-12.726m-30.907 35.279a45.7 45.7 0 0 0-22.554-22.555 45.7 45.7 0 0 0 22.554-22.555 45.7 45.7 0 0 0 22.553 22.555 45.7 45.7 0 0 0-22.553 22.555M224.767 312.226 45.191 491.809c-6.893 6.893-18.107 6.892-25 0-6.892-6.892-6.892-18.106 0-24.998l45.002-45.004a7.515 7.515 0 1 0-10.628-10.628L9.564 456.183c-12.752 12.752-12.752 33.501 0 46.253C15.94 508.813 24.316 512 32.691 512s16.751-3.188 23.127-9.564l179.576-179.582a7.515 7.515 0 0 0-10.627-10.628"])</script><script>self.__next_f.push([1,"14:T69f,M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z17:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/41e61cdfe06ece57.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/220f90813d591239.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L5\",null,{\"buildId\":\"ZXQF-2xXNxSg2B64EuRB-\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/FE/useInfiniteQuery%20%EB%8F%84%EC%9E%85%EA%B8%B0%20(feat.%20ag-grid)\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"FE/useInfiniteQuery%20%EB%8F%84%EC%9E%85%EA%B8%B0%20(feat.%20ag-grid)\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"FE\\\",\\\"useInfiniteQuery 도입기 (feat. ag-grid)\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"FE/useInfiniteQuery%20%EB%8F%84%EC%9E%85%EA%B8%B0%20(feat.%20ag-grid)\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L6\",\"$L7\"],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/cbda1b9e65ea0822.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"ko-kr\",\"className\":\"__variable_0aa4ae scroll-smooth\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"script\",null,{\"src\":\"https://giscus.app/client.js\",\"data-repo\":\"devcdd/devcdd.github.io\",\"data-repo-id\":\"R_kgDOMQ309g\",\"data-category\":\"General\",\"data-category-id\":\"DIC_kwDOMQ309s4Cgh__\",\"data-mapping\":\"pathname\",\"data-strict\":\"0\",\"data-reactions-enabled\":\"1\",\"data-emit-metadata\":\"0\",\"data-input-position\":\"bottom\",\"data-theme\":\"preferred_color_scheme\",\"data-lang\":\"ko\",\"crossOrigin\":\"anonymous\",\"async\":true}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"76x76\",\"href\":\"/static/favicons/cdd-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/static/favicons/cdd-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/static/favicons/cdd-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/static/favicons/site.webmanifest\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: light)\",\"content\":\"#fff\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: dark)\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}],[\"$\",\"body\",null,{\"className\":\"bg-white pl-[calc(100vw-100%)] text-black antialiased dark:bg-gray-950 dark:text-white\",\"children\":[\"$\",\"$Lb\",null,{\"children\":[[\"$undefined\",\"$undefined\",\"$undefined\",[\"$\",\"$Lc\",null,{\"async\":true,\"defer\":true,\"data-website-id\":\"$undefined\",\"src\":\"https://analytics.umami.is/script.js\"}],\"$undefined\",\"$undefined\"],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex h-screen flex-col justify-between font-sans\",\"children\":[[\"$\",\"$Ld\",null,{\"kbarConfig\":{\"searchDocumentsPath\":\"search.json\"},\"children\":[[\"$\",\"header\",null,{\"className\":\"flex items-center justify-between py-10\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"$\",\"$Le\",null,{\"href\":\"/\",\"aria-label\":\"9성급 프론트 개발자가 되기 위해 오늘도 달린다\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mr-3\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":40,\"height\":40,\"viewBox\":\"0 0 512.001 512.001\",\"children\":[[\"$\",\"path\",null,{\"fill\":\"#8c808a\",\"d\":\"M15.364 496.636c-9.818-9.818-9.818-25.737 0-35.555L380.4 96.031c9.819-9.819 25.738-9.819 35.557 0 9.818 9.818 9.818 25.737 0 35.555L50.92 496.636c-9.818 9.819-25.738 9.819-35.556 0\"}],[\"$\",\"path\",null,{\"fill\":\"#7b7179\",\"d\":\"M403.229 118.859 38.192 483.908c-7.575 7.576-18.78 9.3-28.014 5.186a25.1 25.1 0 0 0 5.186 7.542c9.819 9.819 25.738 9.819 35.557 0l365.036-365.05c9.818-9.818 9.818-25.737 0-35.555a25.1 25.1 0 0 0-7.542-5.186c4.113 9.234 2.389 20.439-5.186 28.014\"}],[\"$\",\"path\",null,{\"fill\":\"#e6e2e6\",\"d\":\"M415.956 96.031c-9.818-9.819-25.737-9.819-35.555 0l-52.416 52.418 35.555 35.557 52.416-52.418c9.818-9.819 9.818-25.739 0-35.557\"}],[\"$\",\"path\",null,{\"fill\":\"#d8d1d7\",\"d\":\"M408.414 90.845c4.114 9.234 2.389 20.439-5.186 28.014l-52.417 52.419 12.728 12.728 52.416-52.418c9.818-9.819 9.818-25.738 0-35.556a25 25 0 0 0-7.541-5.187\"}],[\"$\",\"g\",null,{\"fill\":\"#ffdc00\",\"children\":[\"$\",\"path\",null,{\"d\":\"$f\"}]}],[\"$\",\"path\",null,{\"d\":\"$10\"}],[\"$\",\"path\",null,{\"d\":\"M421.581 90.407c-6.177-6.178-14.391-9.58-23.127-9.58s-16.95 3.402-23.128 9.58L362.834 102.9a7.516 7.516 0 0 0 10.628 10.627l12.491-12.493c3.339-3.339 7.778-5.178 12.5-5.178s9.161 1.839 12.5 5.178c6.892 6.892 6.892 18.106 0 24.998l-47.207 47.209-24.998-24.999 13.459-13.46a7.514 7.514 0 0 0 0-10.627 7.514 7.514 0 0 0-10.628 0l-18.771 18.772-.002.002-.002.002L75.821 389.923c-2.736 2.736-2.918 7.255-.399 10.196 2.81 3.282 7.97 3.488 11.027.431L328.12 158.87l24.999 25-107.097 107.101c-2.736 2.736-2.918 7.255-.399 10.196 2.81 3.282 7.97 3.488 11.027.431L421.581 136.66c12.752-12.751 12.752-33.501 0-46.253\"}]]}]}],[\"$\",\"div\",null,{\"className\":\"hidden h-6 text-2xl font-semibold sm:block\",\"children\":\"9성급 프론트 개발자가 되기 위해 오늘도 달린다\"}]]}]}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center space-x-4 leading-5 sm:space-x-6\",\"children\":[[[\"$\",\"$Le\",null,{\"href\":\"/blog\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"Blog\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"Tags\"}],[\"$\",\"$Le\",null,{\"href\":\"/about\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"About\"}]],[\"$\",\"$L11\",null,{\"aria-label\":\"Search\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"strokeWidth\":1.5,\"stroke\":\"currentColor\",\"className\":\"h-6 w-6 text-gray-900 dark:text-gray-100\",\"children\":[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"d\":\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z\"}]}]}],[\"$\",\"$L12\",null,{}],[\"$\",\"$L13\",null,{}]]}]]}],[\"$\",\"main\",null,{\"className\":\"mb-auto\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-x-2 pb-8 pt-6 md:space-y-5\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14\",\"children\":\"404\"}]}],[\"$\",\"div\",null,{\"className\":\"max-w-md\",\"children\":[[\"$\",\"p\",null,{\"className\":\"mb-4 text-xl font-bold leading-normal md:text-2xl\",\"children\":\"Sorry we couldn't find this page.\"}],[\"$\",\"p\",null,{\"className\":\"mb-8\",\"children\":\"But dont worry, you can find plenty of other things on our homepage.\"}],[\"$\",\"$Le\",null,{\"href\":\"/\",\"className\":\"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500\",\"children\":\"Back to homepage\"}]]}]]}],\"notFoundStyles\":[],\"styles\":null}]}]]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"mt-16 flex flex-col items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-3 flex space-x-4\",\"children\":[[\"$\",\"a\",null,{\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/devcdd\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"github\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6\",\"children\":[[\"$\",\"title\",null,{\"children\":\"Github\"}],[\"$\",\"path\",null,{\"d\":\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"}]]}]]}],[\"$\",\"a\",null,{\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://youtube.com/@cdd_world\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"youtube\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6\",\"children\":[[\"$\",\"title\",null,{\"children\":\"Youtube\"}],[\"$\",\"path\",null,{\"d\":\"M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z\"}]]}]]}],[\"$\",\"a\",null,{\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.instagram.com/cdd_world\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"instagram\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6\",\"children\":[[\"$\",\"title\",null,{\"children\":\"Instagram\"}],[\"$\",\"path\",null,{\"d\":\"$14\"}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400\",\"children\":[[\"$\",\"div\",null,{\"children\":\"CDD\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"div\",null,{\"children\":\"© 2024\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"$Le\",null,{\"href\":\"/\",\"children\":\"디디의 개발일지\"}]]}],[\"$\",\"div\",null,{\"className\":\"mb-8 text-sm text-gray-500 dark:text-gray-400\",\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/devcdd\",\"children\":\"CDD GITHUB\"}]}]]}]}]]}]}]]}]}]]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$L15\"],\"globalErrorComponent\":\"$16\",\"missingSlots\":\"$W17\"}]]\n"])</script><script>self.__next_f.push([1,"18:I[4347,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"173\",\"static/chunks/173-db634e5878be84f7.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js\"],\"default\"]\n19:I[8173,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"173\",\"static/chunks/173-db634e5878be84f7.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js\"],\"Image\"]\n1a:I[408,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"173\",\"static/chunks/173-db634e5878be84f7.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js\"],\"default\"]\n1b:I[9629,[\"231\",\"static/chunks/231-c1dde1c428767cbe.js\",\"173\",\"static/chunks/173-db634e5878be84f7.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-78b0d91ae067e09d.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"7:[[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"BlogPosting\\\",\\\"headline\\\":\\\"useInfiniteQuery 도입기 (feat. ag-grid)\\\",\\\"datePublished\\\":\\\"2024-09-07T00:00:00.000Z\\\",\\\"dateModified\\\":\\\"2024-09-07T00:00:00.000Z\\\",\\\"description\\\":\\\"useQuery 기반 사내 프로젝트에서 useInfiniteQuery를 새롭게 도입하게 된 계기, 그리고 어떤식으로 Optimistic Update를 적용했는지에 대해 작성해보려고 합니다.\\\",\\\"url\\\":\\\"https://example.com/blog/FE/useInfiniteQuery 도입기 (feat. ag-grid)\\\",\\\"author\\\":[{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"CDD\\\"}]}\"}}],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[[\"$\",\"$L18\",null,{}],[\"$\",\"article\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700\",\"children\":[[\"$\",\"header\",null,{\"className\":\"pt-6 xl:pb-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"space-y-1 text-center\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"space-y-10\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Published on\"}],[\"$\",\"dd\",null,{\"className\":\"text-base font-medium leading-6 text-gray-500 dark:text-gray-400\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2024-09-07T00:00:00.000Z\",\"children\":\"2024년 9월 7일 토요일\"}]}]]}]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"h1\",null,{\"className\":\"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14\",\"children\":\"useInfiniteQuery 도입기 (feat. ag-grid)\"}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Authors\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"ul\",null,{\"className\":\"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8\",\"children\":[[\"$\",\"li\",\"CDD\",{\"className\":\"flex items-center space-x-2\",\"children\":[[\"$\",\"$L19\",null,{\"src\":\"/static/images/avatar.png\",\"width\":38,\"height\":38,\"alt\":\"avatar\",\"className\":\"h-10 w-10 rounded-full\"}],[\"$\",\"dl\",null,{\"className\":\"whitespace-nowrap text-sm font-medium leading-5\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Name\"}],[\"$\",\"dd\",null,{\"className\":\"text-gray-900 dark:text-gray-100\",\"children\":\"CDD\"}],[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Twitter\"}],[\"$\",\"dd\",null,{\"children\":\"$undefined\"}]]}]]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"prose max-w-none pb-8 pt-10 dark:prose-invert\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"content-header\",\"id\":\"서론\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#서론\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"서론\"]}],[\"$\",\"p\",null,{\"children\":[\"현재 사내 서비스에서는 그리드 내에서 데이터를 무한 스크롤 형식으로 \",[\"$\",\"code\",null,{\"children\":\"Fetching\"}],\" 하는 로직이 굉장히 많이 존재합니다. 하지만 방식이 통일 되어있지 않고 버그도 빈번하게 발생합니다. 이런 문제를 인지하고는 있었으나 기능 개발에 몰두한다고 미뤄뒀던 문제를이자 그리드 로직의 통일을 위해서라도 선임 개발자님이 해결해보자고 제안했고, 이후 과정에 대해서 글을 작성해보려고 합니다. 이를 설명하기 위해서는 기존 로직의 문제점부터 설명을 하고 넘어가는 것이 맞다고 생각해서 이를 먼저 설명하고 넘어가려고 합니다.\"]}],[\"$\",\"ul\",null,{\"className\":\"\",\"children\":[[\"$\",\"li\",\"0\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#기존-로직의-문제점\",\"children\":\"기존 로직의 문제점\"}],[\"$\",\"ul\",null,{\"className\":\"\",\"children\":[[\"$\",\"li\",\"0\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#현재-데이터를-fetch-하여-그리드에-적용시키는-방식\",\"children\":\"현재 데이터를 Fetch 하여 그리드에 적용시키는 방식\"}],null]}],[\"$\",\"li\",\"1\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#기능만-작동하면-되는-거-아니야-뭐-문제가-있어\",\"children\":\"기능만 작동하면 되는 거 아니야? 뭐 문제가 있어?\"}],null]}],[\"$\",\"li\",\"2\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#캐싱-데이터를-전혀-활용하지-못한다니\",\"children\":\"캐싱 데이터를 전혀 활용하지 못한다니..?\"}],null]}],[\"$\",\"li\",\"3\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#서버와-일관된-데이터를-보여주지-못한다고-그게-무슨-소리야\",\"children\":\"서버와 일관된 데이터를 보여주지 못한다고..? 그게 무슨 소리야?\"}],null]}]]}]]}],[\"$\",\"li\",\"1\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#useinfinitequery를-도입하는-것은-어떨까요\",\"children\":\"useInfiniteQuery를 도입하는 것은 어떨까요?\"}],[\"$\",\"ul\",null,{\"className\":\"\",\"children\":[[\"$\",\"li\",\"0\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#새롭게-데이터-fetching-할-때-스크롤-최상단-방어\",\"children\":\"새롭게 데이터 Fetching 할 때 스크롤 최상단 방어\"}],[\"$\",\"ul\",null,{\"className\":\"\",\"children\":[[\"$\",\"li\",\"0\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#여기서-변수\",\"children\":\"여기서 변수\"}],null]}]]}]]}],[\"$\",\"li\",\"1\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#서버와-일관된-데이터를-보여주기-위한-방법\",\"children\":\"서버와 일관된 데이터를 보여주기 위한 방법\"}],[\"$\",\"ul\",null,{\"className\":\"\",\"children\":[[\"$\",\"li\",\"0\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#useinfinitequery에-대한-간단한-설명\",\"children\":\"useInfiniteQuery에 대한 간단한 설명\"}],null]}]]}]]}],[\"$\",\"li\",\"2\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#optimistic-update-적용\",\"children\":\"Optimistic Update 적용\"}],null]}]]}]]}],[\"$\",\"li\",\"2\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#최종적인-workflow\",\"children\":\"최종적인 Workflow\"}],null]}],[\"$\",\"li\",\"3\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#마치며\",\"children\":\"마치며\"}],null]}]]}],[\"$\",\"h2\",null,{\"className\":\"content-header\",\"id\":\"기존-로직의-문제점\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#기존-로직의-문제점\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"기존 로직의 문제점\"]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"현재-데이터를-fetch-하여-그리드에-적용시키는-방식\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#현재-데이터를-fetch-하여-그리드에-적용시키는-방식\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"현재 데이터를 Fetch 하여 그리드에 적용시키는 방식\"]}],[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"ag-grid\"}],\"를 사용하는 환경에서는 고질적인 문제가 있었습니다. 바로 데이터를 \",[\"$\",\"code\",null,{\"children\":\"Fetch\"}],\" 해서 \",[\"$\",\"code\",null,{\"children\":\"set\"}],\" 해줄 때 \",[\"$\",\"code\",null,{\"children\":\"rowData\"}],\"가 새롭게 정의되면서 스크롤이 최상단으로 올라가게 됩니다. 해결책을 찾아보기 전에 기존에 구현해놨던 코드를 보니 \",[\"$\",\"code\",null,{\"children\":\"ag-grid\"}],\" 내의 함수 중 하나인 \",[\"$\",\"code\",null,{\"children\":\"applyTransaction()\"}],\"를 사용했더군요. 이는 \",[\"$\",\"code\",null,{\"children\":\"ag-grid\"}],\" 내부에서 가지고 있는 데이터의 값을 바꿔주는 목적으로 사용됩니다. 이를 통해 \",[\"$\",\"code\",null,{\"children\":\"Optimistic\"}],\"한 업데이트를 구현할 수 있는 것이죠. 아래의 예제 코드를 보시죠.\"]}],[\"$\",\"$L1a\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-ts\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" Transaction \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      add\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"          \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"employeeId\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'4'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Billy'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" age\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"55\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      update\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"          \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"employeeId\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'2'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Bob'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" age\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"23\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      remove\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"          \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"employeeId\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'5'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"그래서 추가/수정/삭제 로직이 일어날 때마다 \",[\"$\",\"code\",null,{\"children\":\"refetch\"}],\" 없이 낙관적 업데이트를 진행해왔고, 심지어 무한 스크롤을 구현할 때도 이러한 방식을 사용했습니다. 예시 코드를 하나 준비했습니다.\"]}],[\"$\",\"$L1a\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-ts\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function function-variable\",\"children\":\"onBodyScroll\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"e\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" BodyScrollEvent\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" data \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fetchMoreData\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"api\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"applyTransaction\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    add\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"...\"}],\"data\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"결국 원본 데이터는 \",[\"$\",\"code\",null,{\"children\":\"ag-grid\"}],\"에 맡긴 채 저희는 \",[\"$\",\"code\",null,{\"children\":\"Transaction\"}],\"만 적용해주고, 진짜 \",[\"$\",\"code\",null,{\"children\":\"Refetch\"}],\"가 필요하다면 데이터를 다시 다 날려서 첫 데이터부터 다시 받아오는 방식을 사용하고 있었던 것이죠. 그래서 가능하다면 \",[\"$\",\"code\",null,{\"children\":\"refetch\"}],\"를 안하는 쪽으로 코드를 구현했습니다.\"]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"기능만-작동하면-되는-거-아니야-뭐-문제가-있어\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#기능만-작동하면-되는-거-아니야-뭐-문제가-있어\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"기능만 작동하면 되는 거 아니야? 뭐 문제가 있어?\"]}],[\"$\",\"p\",null,{\"children\":[\"개인적으로는 2가지의 문제가 있다고 생각합니다. 첫 번째는 \",[\"$\",\"code\",null,{\"children\":\"react query\"}],\"를 기술 스택으로 삼았음에도 캐싱 데이터를 전혀 활용하고 있지 못한다는 점, 그리고 두 번째는 데이터의 추가/삭제가 일어났을 때 서버와 일관된 데이터를 보여주지 못한다는 점입니다. 하나씩 설명해보려고 합니다.\"]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"캐싱-데이터를-전혀-활용하지-못한다니\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#캐싱-데이터를-전혀-활용하지-못한다니\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"캐싱 데이터를 전혀 활용하지 못한다니..?\"]}],[\"$\",\"p\",null,{\"children\":[\"우선적으로 기존 코드를 그대로 들고온 상황인만큼 현재의 데이터 \",[\"$\",\"code\",null,{\"children\":\"Fetching\"}],\" 방식도 \",[\"$\",\"code\",null,{\"children\":\"useQuery\"}],\"를 통해 첫 번째 페이지의 데이터를 받아오고, 이후 데이터는 모두 \",[\"$\",\"code\",null,{\"children\":\"addTransaction\"}],\"으로 넣어줍니다. 쿼리키 변동이 잦아 데이터 교체가 빈번하게 이뤄지는 상황에서 정작 캐싱을 할 수 있는 건 첫 번째 페이지 뿐인 것이죠. 좀 더 자세한 예시를 들어 설명 해보겠습니다.\"]}],[\"$\",\"p\",null,{\"children\":[\"저희 사내 서비스는 한 유저가 여러 그룹에 속할 수 있는데, 그룹마다 다른 데이터를 뿌려줘야 합니다. 그래서 그룹에 대한 정보가 \",[\"$\",\"code\",null,{\"children\":\"queryKey\"}],\"의 일부로 들어가있고, 그룹의 변동이 일어날 때마다 \",[\"$\",\"code\",null,{\"children\":\"queryKey\"}],\" 값이 바뀌게 되면서 새로운 데이터를 \",[\"$\",\"code\",null,{\"children\":\"Fetching\"}],\" 하게 됩니다.\"]}],[\"$\",\"$L1a\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-mdx\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"1. 그룹 1의 데이터 (1-10)페이지 만큼 Fetch\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"2. 그룹 2 선택\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"3. 그룹 1 선택\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"4. 그룹 1의 데이터는 1페이지만 캐싱되어 있음\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"5. 다시 그룹 1의 (1-10)페이지까지의 데이터를 얻기 위해 계속해서 무한 스크롤을 해야 됨\\n\"}]]}]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"서버와-일관된-데이터를-보여주지-못한다고-그게-무슨-소리야\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#서버와-일관된-데이터를-보여주지-못한다고-그게-무슨-소리야\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"서버와 일관된 데이터를 보여주지 못한다고..? 그게 무슨 소리야?\"]}],[\"$\",\"p\",null,{\"children\":\"물론 완벽하게는 힘들겠지만, 그렇다해도 현재는 완성도가 너무 떨어집니다. 이것도 예시를 들어서 설명해보겠습니다.\"}],[\"$\",\"$L1a\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-mdx\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"- 데이터는 순서대로 1번, 2번, 3번 ...의 ID를 가지고 있다고 가정합니다.\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"- 한 번의 Fetch 당 데이터를 100개씩 들고온다고 가정합니다.\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"1. 클라이언트에서 100개의 데이터 중 98번, 99번, 100번 데이터를 삭제 및 낙관적 업데이트\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"2. 클라이언트의 마지막 데이터는 97번 데이터가 됨\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"3. 서버에서는 101번, 102번, 103번 데이터가 기존의 98, 99, 100번 데이터의 자리를 대체\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"4. 클라이언트에서 refetch\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"5. 서버에서는 104번 데이터부터 203번까지의 데이터를 보내줌\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"6. 101번 - 103번의 데이터는 어디에..?\\n\"}]]}]}],[\"$\",\"p\",null,{\"children\":\"결국 아무리 스크롤을 내려도 101번에서 103번까지의 데이터는 새로고침을 하지 않는 이상 찾지 못하게 된다는 것이죠. 이러한 과정이 반복될수록 서버와의 데이터 일관성을 점점 더 잃어갑니다.\"}],[\"$\",\"h2\",null,{\"className\":\"content-header\",\"id\":\"useinfinitequery를-도입하는-것은-어떨까요\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#useinfinitequery를-도입하는-것은-어떨까요\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"useInfiniteQuery를 도입하는 것은 어떨까요?\"]}],[\"$\",\"p\",null,{\"children\":[\"생각해보니 위의 두 가지 문제점을 완벽히 해결할 수 있을만한 방법이 바로 \",[\"$\",\"code\",null,{\"children\":\"useInfiniteQuery\"}],\"를 사용하는 것이었습니다. 사이드 프로젝트에서 한 번 써보기는 했는데, 사내 프로젝트를 위해서는 추가적인 기술 검토가 필요했기에 테스트 프로젝트를 하나 더 만들어서 여러가지 테스트를 해봤습니다.\"]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"새롭게-데이터-fetching-할-때-스크롤-최상단-방어\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#새롭게-데이터-fetching-할-때-스크롤-최상단-방어\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"새롭게 데이터 \",[\"$\",\"code\",null,{\"children\":\"Fetching\"}],\" 할 때 스크롤 최상단 방어\"]}],[\"$\",\"p\",null,{\"children\":[\"몇 개월 전의 기억을 더듬어 보니 회사 동료 중 한 명에게 스크롤이 최상단으로 가는 것을 막을 수 있는 방법이 있다고 들어서 관련해서 공식문서를 뒤져보니 \",[\"$\",\"code\",null,{\"children\":\"AgGridReact\"}],\" 컴포넌트 \",[\"$\",\"code\",null,{\"children\":\"props\"}],\" 중에 \",[\"$\",\"code\",null,{\"children\":\"suppressScrollOnNewData\"}],\"라는 옵션이 있더군요. 이를 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\" 값으로 변경해주면 무한 스크롤 중에 새로운 데이터가 들어왔을 때 스크롤이 최상단으로 올라가지 않게 되어 캐싱하고 있는 데이터 그대로 그리드에 넣어줄 수 있게 됩니다.\"]}],[\"$\",\"h4\",null,{\"className\":\"content-header\",\"id\":\"여기서-변수\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#여기서-변수\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"여기서 변수\"]}],[\"$\",\"p\",null,{\"children\":[\"하지만, 강제로 스크롤을 최상단으로 올려야 하는 경우도 있습니다. 예를 들어 그룹 1에서 400 번째 데이터를 보다가 그룹 2로 갔는데도 그룹 2의 400번째 데이터가 나오면 안되겠죠. 정책 상으로도 첫 번째 데이터부터 보여줘야 해서 추가적인 방법을 찾아야 했습니다. \",[\"$\",\"code\",null,{\"children\":\"suppressScrollOnNewData\"}],\"의 값을 토글링 해주는 방법을 생각했었습니다.\"]}],[\"$\",\"$L1a\",null,{\"className\":\"language-python\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-python\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# 첫번째 방법\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1.\"}],\" 그룹이 변경되면 data가 잠시 undefined \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"/\"}],\" null로 됨\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2.\"}],\" 이를 감지하여 토글 시키는 방식\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"3.\"}],\" data가 캐싱되어 있으면 data는 항상 존재하기에 실패\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# 두번째 방법\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1.\"}],\" suppressScrollOnNewData를 관리해 줄 State를 하나 만들어줌\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2.\"}],\" 그룹이 변경되면 수동으로 State를 토글 시킴\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"3.\"}],\" 구조가 이상한 것 같음 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"state를 바꿔 그리드를 리렌더링 시키고\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" 이후에 데이터를 Fetching 해야됨\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"'\",[\"$\",\"code\",null,{\"children\":\"querySelector\"}],\" 같은 걸로 요소 찾고 스크롤을 강제로 올려줘야 하나?' 하면서 조금 더 서칭을 해본 결과 \",[\"$\",\"code\",null,{\"children\":\"ag-grid\"}],\" 내에서 스크롤을 최상단으로 올리는 함수를 지원한다는 것을 알게되었습니다. 그것은 바로 \",[\"$\",\"code\",null,{\"children\":\"ensureIndexVisible(0, \\\"top\\\")\"}],\"인데요, 아무리 검색해도 안나오더니 \",[\"$\",\"code\",null,{\"children\":\"GPT\"}],\"가 도와줬습니다, (\",[\"$\",\"del\",null,{\"children\":\"넌 이런 것까지 어떻게 아는거니..?\"}],\"). 이제 스크롤에 대한 문제는 완벽히 해결되었으니 다음 문제를 찾으러 가보죠.\"]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"서버와-일관된-데이터를-보여주기-위한-방법\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#서버와-일관된-데이터를-보여주기-위한-방법\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"서버와 일관된 데이터를 보여주기 위한 방법\"]}],[\"$\",\"h4\",null,{\"className\":\"content-header\",\"id\":\"useinfinitequery에-대한-간단한-설명\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#useinfinitequery에-대한-간단한-설명\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],[\"$\",\"code\",null,{\"children\":\"useInfiniteQuery\"}],\"에 대한 간단한 설명\"]}],[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"useInfiniteQuery\"}],\"의 구조를 한 번 보고 넘어가면 좋을 것 같아 간단하게 코드를 작성해봤습니다.\"]}],[\"$\",\"$L1a\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-ts\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" data\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" fetchNextPage\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" hasNextPage\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" isFetching\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" isFetchingNextPage \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token generic-function\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"useInfiniteQuery\"}],[\"$\",\"span\",null,{\"className\":\"token class-name generic\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"any\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"any\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"any\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}]]}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      queryKey\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"data\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" key\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token function function-variable\",\"children\":\"queryFn\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" pageParam \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getData\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"          key\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" key\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"          offset\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      enabled\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],\"key\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// key가 있을 때만 활성화\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token function function-variable\",\"children\":\"getNextPageParam\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"lastPage\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" allPages\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"lastPage\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"length \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"PAGE_SIZE\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" allPages\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"length \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"*\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"PAGE_SIZE\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"이렇게 코드를 작성하게 된다면 \",[\"$\",\"code\",null,{\"children\":\"data\"}],\"에는 어떤 데이터가 들어오게 될까요? 아래와 같습니다.\"]}],[\"$\",\"$L1a\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-js\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"data \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token literal-property property\",\"children\":\"pages\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"data1 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\" data100\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// 첫 번째 페이지\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"data101 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\" data200\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// 두 번째 페이지\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token operator spread\",\"children\":\"...\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token literal-property property\",\"children\":\"pageParams\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"100\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator spread\",\"children\":\"...\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"여기서 제일 중요한 것은 바로 \",[\"$\",\"code\",null,{\"children\":\"pageParams\"}],\"인데요, \",[\"$\",\"code\",null,{\"children\":\"getNextPageParam\"}],\" 함수로 리턴해주는 값이 \",[\"$\",\"code\",null,{\"children\":\"pageParams\"}],\" 배열에 \",[\"$\",\"code\",null,{\"children\":\"push\"}],\"되는 형태로 됩니다. 제가 예시로 적어둔 \",[\"$\",\"code\",null,{\"children\":\"0, 100, ...\"}],\"이라는 값은 모두 \",[\"$\",\"code\",null,{\"children\":\"getNextPageParam\"}],\" 함수에서 리턴해줬던 값인 것이죠.\"]}],[\"$\",\"p\",null,{\"children\":[\"자, 그럼 이게 왜 중요할까요? 바로 \",[\"$\",\"code\",null,{\"children\":\"invalidate\"}],\"에 있습니다. 일반적으로 \",[\"$\",\"code\",null,{\"children\":\"useQuery\"}],\"에서 \",[\"$\",\"code\",null,{\"children\":\"invalidate\"}],\"를 시키면 당연하게도 \",[\"$\",\"strong\",null,{\"children\":\"한 번\"}],\" 리페칭을 하게 되는데, \",[\"$\",\"code\",null,{\"children\":\"useInfiniteQuery\"}],\"에서는 \",[\"$\",\"code\",null,{\"children\":\"pageParms\"}],\"에 있는 모든 값들을 활용하여 \",[\"$\",\"code\",null,{\"children\":\"refetch\"}],\" 로직을 수행합니다. 예를 들어 \",[\"$\",\"code\",null,{\"children\":\"pageParams\"}],\"에 \",[\"$\",\"code\",null,{\"children\":\"[0, 100, 200]\"}],\"이 있다면 \",[\"$\",\"code\",null,{\"children\":\"invalidate\"}],\"를 시켰을 때 \",[\"$\",\"code\",null,{\"children\":\"0, 100, 200\"}],\" 페이지의 데이터를 모두 \",[\"$\",\"code\",null,{\"children\":\"refetch\"}],\"하게 되는 방식입니다.\"]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"optimistic-update-적용\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#optimistic-update-적용\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"Optimistic Update 적용\"]}],[\"$\",\"p\",null,{\"children\":[\"자, 그러면 이제 \",[\"$\",\"code\",null,{\"children\":\"Optimistic Update\"}],\"를 고민해봐야 하는데요, 기존에는 \",[\"$\",\"code\",null,{\"children\":\"applyTransaction\"}],\"을 사용하여 이를 진행했었죠? 하지만 여기서 의심이 하나 들었습니다. 이것도 풀어서 설명하기는 에매해서 아래에 예시를 하나 만들어봤습니다.\"]}],[\"$\",\"$L1a\",null,{\"className\":\"language-python\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-python\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1.\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1000\"}],\"개 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\"페이지 당 \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"100\"}],\"개의 데이터니까 \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"10\"}],\"페이지\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"의 데이터를 가지고 있다고 가정합니다\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2.\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"999\"}],\"번째 데이터의 정보를 수정한 후\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" applyTransaction을 통해 낙관적 업데이트를 수행합니다\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"3.\"}],\" invalidate를 시킵니다\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1000\"}],\"개의 데이터를 다시 받아오겠죠?\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"4.\"}],\" fetch는 순차적으로 이뤄져서 첫 번째 페이지부터 두 번째\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" 세 번째 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" refetch를 진행합니다\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"5.\"}],\" 마지막 페이지가 refetch 될 때까지 applyTransaction으로 바꾼 데이터는 보존이 될까?\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"6.\"}],\" 이론상 캐싱된 데이터가 \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"set\"}],\" 되서 applyTransaction으로 만든 데이터가 날라갈 것 같다는 생각이 듦\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"그래서 곧바로 테스트 프로젝트에서 테스팅을 해봤는데, 예상대로 \",[\"$\",\"code\",null,{\"children\":\"applyTransaction\"}],\"으로 적용한 낙관적 업데이트가 다시 사라져버리더군요. 깨달았습니다, \",[\"$\",\"strong\",null,{\"children\":\"수동적으로 캐싱된 데이터를 바꿔줘야 하는구나\"}],\". 다행히도 여기에 대한 해답은 빨리 찾아냈는데, 바로 \",[\"$\",\"code\",null,{\"children\":\"setQueryData\"}],\"라는 것입니다. 말 그대로 \",[\"$\",\"code\",null,{\"children\":\"queryData\"}],\" 자체를 바꿀 수 있는 함수인데요, 사용방법은 아래와 같습니다.\"]}],[\"$\",\"$L1a\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-ts\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" queryClient \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"useQueryClient\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function function-variable\",\"children\":\"optimisticUpdate\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"key\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  queryClient\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"setQueryData\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"data\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" key\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"oldData\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"any\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],\"oldData\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"...\"}],\"oldData\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      pages\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" oldData\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"pages\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"map\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"any\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"map\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"item\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"any\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"          \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" item\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"key \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" key\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"            \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"...\"}],\"item\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"                name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"수정된 데이터\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"              \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"            \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" item\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"첫 번째 파라미터로는 데이터를 관리하고 있는 쿼리의 \",[\"$\",\"code\",null,{\"children\":\"queryKey\"}],\" 값을 넣어주면, 두 번째로 들어가는 콜백 함수는 해당 쿼리키가 가지고 있는 캐시값을 파라미터로 던져줍니다. 바로 그것이 \",[\"$\",\"code\",null,{\"children\":\"oldData\"}],\"가 되는 것이죠. 그러면 이 \",[\"$\",\"code\",null,{\"children\":\"oldData\"}],\"를 가공해서 원하는 모양으로 만들어주면 됩니다. 이렇게 하면 \",[\"$\",\"code\",null,{\"children\":\"refetch\"}],\"를 해도 \",[\"$\",\"code\",null,{\"children\":\"Optimistic Update\"}],\"가 사라지지 않게 되겠죠?\"]}],[\"$\",\"h2\",null,{\"className\":\"content-header\",\"id\":\"최종적인-workflow\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#최종적인-workflow\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"최종적인 Workflow\"]}],[\"$\",\"ol\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":\"useInfiniteQuery를 통해 데이터를 Fetch한다.\"}],[\"$\",\"li\",null,{\"children\":\"데이터를 추가, 업데이트, 삭제할 시 setQueryData를 사용하여 직접적으로 캐시 자체를 업데이트 한다 (Optimistic Update).\"}],[\"$\",\"li\",null,{\"children\":\"invalidateQueries를 통해 전체 데이터를 리프레시 해온다.\"}]]}],[\"$\",\"p\",null,{\"children\":[\"다만 \",[\"$\",\"code\",null,{\"children\":\"invalidate\"}],\"는 서버에 부하가 갈수도 있는만큼 조심해서 수행해야 할 것 같습니다. 과도하게 말고 데이터의 불일치 문제가 자주 발생하는 상황이 예상되는 케이스 같은 경우(e.g. 데이터 삭제)에만 적용을 해주는 쪽으로 생각해봐야 할 것 같습니다.\"]}],[\"$\",\"h2\",null,{\"className\":\"content-header\",\"id\":\"마치며\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#마치며\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 20 20\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"마치며\"]}],[\"$\",\"p\",null,{\"children\":[\"사실 \",[\"$\",\"code\",null,{\"children\":\"useInfiniteQuery\"}],\"는 이전에 사이드 프로젝트에서도 사용했었는데, 그때는 사용했던 이유가 다른 페이지로 이동했다가 \",[\"$\",\"code\",null,{\"children\":\"popState\"}],\" 같은 동작을 수행했을 때 데이터를 다시 처음부터 받아오는 것을 방지하기 위함이었습니다. 당시에는 로직 구현에만 급급했어서 자세한 동작 원리를 이해하지 못했었는데, 이번 기회로 \",[\"$\",\"code\",null,{\"children\":\"useInfiniteQuery\"}],\"에 대한 이해도가 높아진 것 같은 느낌이 듭니다. 추가적인 \",[\"$\",\"code\",null,{\"children\":\"TroubleShoot\"}],\"이 생긴다면 이후에 글을 추가하는 방향도 고려해보겠습니다.\"]}],[\"$\",\"p\",null,{\"children\":[\"아마 \",[\"$\",\"code\",null,{\"children\":\"ag-grid\"}],\"에서 \",[\"$\",\"code\",null,{\"children\":\"useInfiniteQuery\"}],\"를 사용하는 환경인 경우 이 글이 큰 도움이 될 것 같네요. 긴 글 읽어주셔서 감사합니다!\"]}]]}],[\"$\",\"div\",null,{\"className\":\"pb-6 pt-6 text-sm text-gray-700 dark:text-gray-300\",\"children\":[[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"nofollow\",\"href\":\"https://mobile.twitter.com/search?q=https%3A%2F%2Fexample.com%2Fblog%2FFE%2FuseInfiniteQuery%20%EB%8F%84%EC%9E%85%EA%B8%B0%20(feat.%20ag-grid)\",\"children\":\"Discuss on Twitter\"}],\" • \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/devcdd/devlog/blob/main/data/blog/FE/useInfiniteQuery 도입기 (feat. ag-grid).mdx\",\"children\":\"View on GitHub\"}]]}],[\"$\",\"div\",null,{\"className\":\"pb-6 pt-6 text-center text-gray-700 dark:text-gray-300\",\"id\":\"comment\",\"children\":[\"$\",\"$L1b\",null,{\"slug\":\"FE/useInfiniteQuery 도입기 (feat. ag-grid)\"}]}]]}],[\"$\",\"footer\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y\",\"children\":[[\"$\",\"div\",null,{\"className\":\"py-4 xl:py-8\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Tags\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap\",\"children\":[[\"$\",\"$Le\",null,{\"href\":\"/tags/typescript\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"typescript\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags/nextjs\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"nextJS\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags/reactjs\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"reactJS\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags/react-query\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"react-query\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags/useinfinitequery\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"useInfiniteQuery\"}],[\"$\",\"$Le\",null,{\"href\":\"/tags/ag-grid\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"ag-grid\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Previous Article\"}],[\"$\",\"div\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":[\"$\",\"$Le\",null,{\"href\":\"/blog/FE/리액트 단에서 미디어 쿼리 구현하기\",\"children\":\"리액트 단에서 미디어 쿼리 구현하기\"}]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Next Article\"}],[\"$\",\"div\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":[\"$\",\"$Le\",null,{\"href\":\"/blog/retrospect/여유로울 때 쓰는 회고\",\"children\":\"여유로울 때 쓰는 회고\"}]}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"pt-4 xl:pt-8\",\"children\":[\"$\",\"$Le\",null,{\"href\":\"/blog\",\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"aria-label\":\"Back to the blog\",\"children\":\"← Back to the blog\"}]}]]}]]}]]}]}]]}]]\n"])</script><script>self.__next_f.push([1,"15:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"useInfiniteQuery 도입기 (feat. ag-grid) | 디디의 개발일지\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"useQuery 기반 사내 프로젝트에서 useInfiniteQuery를 새롭게 도입하게 된 계기, 그리고 어떤식으로 Optimistic Update를 적용했는지에 대해 작성해보려고 합니다.\"}],[\"$\",\"meta\",\"4\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"5\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"link\",\"6\",{\"rel\":\"canonical\",\"href\":\"https://example.com/blog/FE/useInfiniteQuery%20%EB%8F%84%EC%9E%85%EA%B8%B0%20(feat.%20ag-grid)\"}],[\"$\",\"link\",\"7\",{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"https://example.com/feed.xml\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:title\",\"content\":\"useInfiniteQuery 도입기 (feat. ag-grid)\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:description\",\"content\":\"useQuery 기반 사내 프로젝트에서 useInfiniteQuery를 새롭게 도입하게 된 계기, 그리고 어떤식으로 Optimistic Update를 적용했는지에 대해 작성해보려고 합니다.\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:url\",\"content\":\"https://example.com/blog/FE/useInfiniteQuery%20%EB%8F%84%EC%9E%85%EA%B8%B0%20(feat.%20ag-grid)\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:site_name\",\"content\":\"디디의 개발일지\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:image\",\"content\":\"https://example.comundefined/\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"15\",{\"property\":\"article:published_time\",\"content\":\"2024-09-07T00:00:00.000Z\"}],[\"$\",\"meta\",\"16\",{\"property\":\"article:modified_time\",\"content\":\"2024-09-07T00:00:00.000Z\"}],[\"$\",\"meta\",\"17\",{\"property\":\"article:author\",\"content\":\"CDD\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:title\",\"content\":\"useInfiniteQuery 도입기 (feat. ag-grid)\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:description\",\"content\":\"useQuery 기반 사내 프로젝트에서 useInfiniteQuery를 새롭게 도입하게 된 계기, 그리고 어떤식으로 Optimistic Update를 적용했는지에 대해 작성해보려고 합니다.\"}],[\"$\",\"meta\",\"21\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"6:null\n"])</script></body></html>